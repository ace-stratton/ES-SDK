
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://endurosat.com/devguide/devguide_cmake.html">
      
      
        <link rel="prev" href="devguide_dirstructure.html">
      
      
        <link rel="next" href="devguide_buildcfg.html">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Build structure - EnduroSat On-Board Computer SDK Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#building-obc-sdk-from-the-console-via-macaron" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="EnduroSat On-Board Computer SDK Documentation" class="md-header__button md-logo" aria-label="EnduroSat On-Board Computer SDK Documentation" data-md-component="logo">
      
  <img src="../EnduroSat_horLogo_symbol@2x-min.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EnduroSat On-Board Computer SDK Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Build structure
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../index.html" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../quickstart.html" class="md-tabs__link">
        
  
    
  
  Quick-start Guide

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="hldesign.html" class="md-tabs__link">
          
  
  Developer's Guide

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../assets/src-docs/index.html" class="md-tabs__link">
        
  
    
  
  Code Reference

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../reference_docs.html" class="md-tabs__link">
        
  
    
  
  Reference documents

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../change_history.html" class="md-tabs__link">
        
  
    
  
  Change history

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../contacts.html" class="md-tabs__link">
        
  
    
  
  Contacts

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="EnduroSat On-Board Computer SDK Documentation" class="md-nav__button md-logo" aria-label="EnduroSat On-Board Computer SDK Documentation" data-md-component="logo">
      
  <img src="../EnduroSat_horLogo_symbol@2x-min.png" alt="logo">

    </a>
    EnduroSat On-Board Computer SDK Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick-start Guide
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Developer's Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Developer's Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="hldesign.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    High-Level Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_dirstructure.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Directory structure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Build structure
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="devguide_cmake.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Build structure
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-obc-sdk-from-the-console-via-macaron" class="md-nav__link">
    <span class="md-ellipsis">
      Building OBC SDK from the console via macaron
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmake-build-organization" class="md-nav__link">
    <span class="md-ellipsis">
      CMake build organization
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-version" class="md-nav__link">
    <span class="md-ellipsis">
      Build version
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    OBC configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            OBC configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_buildcfg.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build-time configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_sysconfig.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run-time configuration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development recipes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Development recipes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_newcomp.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extending the SDK with new components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_esps_cmd_extend.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extending the set of OBC supported commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_fwupd.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bootloader and firmware updates handling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_debugtrace.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug and trace
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_assertions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assertions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_datacache.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Cache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_telemetry.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telemetry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_micropython.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MicroPython
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_es_adcs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EnduroSat ADCS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_10" >
        
          
          <label class="md-nav__link" for="__nav_3_5_10" id="__nav_3_5_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Operations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_10">
            <span class="md-nav__icon md-icon"></span>
            Operations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_conops.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concept of Operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_user_payloads.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Payloads
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_aocs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Attitude and Orbit Control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_payload_scheduler.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Payload Scheduler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_cubeadcs_gen2_service.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CubeADCS Gen2 Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_operations_guide.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operations Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_pm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance monitor
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Connectivity
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Connectivity
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devguide_eth.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ethernet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/src-docs/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Reference
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference_docs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference documents
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../change_history.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Change history
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contacts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contacts
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Build structure</h1>

<p>The <abbr title="On-board Computer">OBC</abbr> SDK build is orchestrated by several tools each being responsible to generate specific build products. A short overview is presented below:</p>
<p><center><a class="glightbox" href="../assets/plantuml/img/obc_build_structure.svg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="OBC SDK build structure" src="../assets/plantuml/img/obc_build_structure.svg" /></a></center></p>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Build location</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><abbr title="EnduroSat OBC build system wrapper which provides a user-friendly command-line interface to the most commonly used build and flashing operations">macaron</abbr></strong> build wrapper</td>
<td><code>build/macaron.py</code></td>
<td>A Python script which performs high-level build orchestration and specific side-tasks which are difficult to manage with <em>CMake</em> alone. This script also provides a front-end for <em>CMake</em> to call the <em><abbr title="EnduroSat code generation framework based on FIDL file interface descriptions">macchiato</abbr></em> code generator in an easier and more streamlined way.</td>
</tr>
<tr>
<td><a href="https://cmake.org/">CMake</a></td>
<td>user system dependent</td>
<td>CMake is an open-source, cross-platform family of tools designed to build, test and package software. CMake is used to control the software compilation process using simple platform and compiler independent configuration files, and generate native makefiles and workspaces that can be used in the compiler environment of your choice.</td>
</tr>
<tr>
<td><a href="https://ninja-build.org/">ninja</a></td>
<td>user system dependent</td>
<td>Ninja is a small build system with a focus on speed. It differs from other build systems in two major respects: it is designed to have its input files generated by a higher-level build system, and it is designed to run builds as fast as possible.</td>
</tr>
<tr>
<td><abbr title="EnduroSat code generation framework based on FIDL file interface descriptions">macchiato</abbr></td>
<td><code>other/scripts/gen/macchiato/macchiato.jar</code></td>
<td>This is a code-generation Xtend-based framework used by EnduroSat to facilitate generation of source code and documentation from <a href="https://franca.github.io/franca/">Franca <abbr title="Interface Definition Language">IDL</abbr></a> files (a.k.a. <abbr title="Franca Interface Definition Language">FIDL</abbr>). This is the standard EnduroSat way of describing inter-module communication APIs. <abbr title="Franca Interface Definition Language source files">FIDLs</abbr> are also used to generate certain parts of the <abbr title="On-board Computer">OBC</abbr> SDK in order to streamline development and enable faster configuration of the system. <em><abbr title="EnduroSat code generation framework based on FIDL file interface descriptions">macchiato</abbr></em> usage is documented in detail in a separate package. Please check with your EnduroSat support team on how to obtain the latest reference.</td>
</tr>
</tbody>
</table>
<h2 id="building-obc-sdk-from-the-console-via-macaron">Building <abbr title="On-board Computer">OBC</abbr> SDK from the console via <em><abbr title="EnduroSat OBC build system wrapper which provides a user-friendly command-line interface to the most commonly used build and flashing operations">macaron</abbr></em></h2>
<p>If you checked the <a href="../quickstart.html">Quick-start guide</a> already, you know how to build the <abbr title="On-board Computer">OBC</abbr> SDK from the STM32CubeIDE. However, there are times when you would like to automate your builds for easier testing and perhaps call your build process from a CI/CD pipeline. In such scenarios, you should opt for building the <abbr title="On-board Computer">OBC</abbr> SDK from a console using the <em><abbr title="EnduroSat OBC build system wrapper which provides a user-friendly command-line interface to the most commonly used build and flashing operations">macaron</abbr></em> build wrapper.</p>
<p>As a first step, you shall ensure that you have a correctly setup environment with all necessary tooling in your system path. That would be:</p>
<ul>
<li>Python 3+ interpreter</li>
<li>CMake executable</li>
<li>ninja executable</li>
<li>Java Runtime Environment</li>
</ul>
<p>Now to trigger the build process:</p>
<ol>
<li>Open a system console</li>
<li>Change your working folder by typing <code>cd &lt;OBC SDK&gt;/build</code>
   <em>(<img alt="❗" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2757.svg" title=":exclamation:" /> replace <code>&lt;OBC SDK&gt;</code> with the actual path where you extracted the <abbr title="On-board Computer">OBC</abbr> SDK sources)</em></li>
<li>Start a clean build of the <code>noboot_debug</code> target by typing <code>python macaron.py -b noboot_debug -c -rl</code></li>
<li>If everything is correctly setup, you should observe the same output as the one printed in the STM32CubeIDE console:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code>2022-10-17 10:36:49,885 | INFO     | &lt;module&gt;:404 | EnduroSat -macaron- build front-end [v0.2]
2022-10-17 10:36:49,886 | DEBUG    | &lt;module&gt;:407 | macaron.py started with args: Namespace(build=&#39;noboot_debug&#39;, release_ver=None, clean=False, clean_gen_content=WindowsPath(&#39;.&#39;), fp_gen=False, datacache_gen=False, fp_gen_all=False, depl_config=&#39;&#39;, fp_merge_root=WindowsPath(&#39;.&#39;), verbose=True, error_out_only=False, reset_log=True)
2022-10-17 10:36:49,886 | WARNING  | get_build_root_path:84 | ESPF_ROOT_BUILD_PATH environment variable not set. Using default path setting resolving to &quot;C:\Projects\OBC\demo\3.0.2.sdk&quot;.
2022-10-17 10:36:49,892 | INFO     | print_cmd_info:130 | &gt;  starting command: &quot;cmake . -G Ninja Multi-Config -DCMAKE_TOOLCHAIN_FILE=arm_toolchain.cmake&quot;...
2022-10-17 10:36:50,619 | DEBUG    | run_cmd:153 |  -- The C compiler identification is GNU 10.3.1
2022-10-17 10:36:51,066 | DEBUG    | run_cmd:153 |  -- The ASM compiler identification is GNU
2022-10-17 10:36:51,198 | DEBUG    | run_cmd:153 |  -- Found assembler: C:/ST/STM32CubeIDE_1.4.0/STM32CubeIDE/plugins/com.st.stm32cube.ide.mcu.externaltools.gnu-tools-for-stm32.10.3-2021.10.win32_1.0.0.202111181127/tools/bin/arm-none-eabi-gcc.exe
2022-10-17 10:36:51,242 | DEBUG    | run_cmd:153 |  -- Detecting C compiler ABI info
2022-10-17 10:36:52,001 | DEBUG    | run_cmd:153 |  -- Detecting C compiler ABI info - done
2022-10-17 10:36:52,043 | DEBUG    | run_cmd:153 |  -- Check for working C compiler: C:/ST/STM32CubeIDE_1.4.0/STM32CubeIDE/plugins/com.st.stm32cube.ide.mcu.externaltools.gnu-tools-for-stm32.10.3-2021.10.win32_1.0.0.202111181127/tools/bin/arm-none-eabi-gcc.exe - skipped
2022-10-17 10:36:52,044 | DEBUG    | run_cmd:153 |  -- Detecting C compile features
2022-10-17 10:36:52,045 | DEBUG    | run_cmd:153 |  -- Detecting C compile features - done
2022-10-17 10:36:52,093 | DEBUG    | run_cmd:153 |  -- &gt;&gt; Active build configuration: noboot_debug
2022-10-17 10:36:52,256 | DEBUG    | run_cmd:153 |  -- looking for pre-built library &#39;C:/Projects/OBC/demo/3.0.2.sdk/build/../lib/noboot_debug/libespsi_drv.a&#39;
2022-10-17 10:36:52,256 | DEBUG    | run_cmd:153 |  -- looking for pre-built library &#39;C:/Projects/OBC/demo/3.0.2.sdk/build/../lib/noboot_debug/libespsi_drv.a&#39; - not found - will attempt to build from source
2022-10-17 10:36:52,259 | DEBUG    | run_cmd:153 |  -- looking for pre-built library &#39;C:/Projects/OBC/demo/3.0.2.sdk/build/../lib/noboot_debug/libESPSI.a&#39;
2022-10-17 10:36:52,259 | DEBUG    | run_cmd:153 |  -- looking for pre-built library &#39;C:/Projects/OBC/demo/3.0.2.sdk/build/../lib/noboot_debug/libESPSI.a&#39; - found - will perform a direct linkage
2022-10-17 10:36:52,260 | DEBUG    | run_cmd:153 |  -- looking for pre-built library &#39;C:/Projects/OBC/demo/3.0.2.sdk/build/../lib/noboot_debug/libespf_sub.a&#39;
2022-10-17 10:36:52,260 | DEBUG    | run_cmd:153 |  -- looking for pre-built library &#39;C:/Projects/OBC/demo/3.0.2.sdk/build/../lib/noboot_debug/libespf_sub.a&#39; - not found - will attempt to build from source
2022-10-17 10:36:52,485 | DEBUG    | run_cmd:153 |  -- Configuring done
2022-10-17 10:36:54,306 | DEBUG    | run_cmd:153 |  -- Generating done
2022-10-17 10:36:54,494 | DEBUG    | run_cmd:153 |  -- Build files have been written to: C:/Projects/OBC/demo/3.0.2.sdk/build
2022-10-17 10:36:54,506 | INFO     | print_cmd_info:130 | &gt;  command finished successfully!
2022-10-17 10:36:54,506 | INFO     | print_cmd_info:130 | &gt;  starting command: &quot;cmake --build . --config noboot_debug&quot;...
2022-10-17 10:36:56,598 | DEBUG    | run_cmd:153 |  [1/328] Building C object libespsi_drv/CMakeFiles/espsi_drv.dir/noboot_debug/src/esps_drv_stats.c.obj
2022-10-17 10:36:56,598 | DEBUG    | run_cmd:153 |  [2/328] Building C object libespsi_drv/CMakeFiles/espsi_drv.dir/noboot_debug/src/esps_drv_pool.c.obj
2022-10-17 10:36:56,598 | DEBUG    | run_cmd:153 |  [3/328] Building C object libespsi_drv/CMakeFiles/espsi_drv.dir/noboot_debug/src/esps_drv_queue.c.obj
2022-10-17 10:36:56,598 | DEBUG    | run_cmd:153 |  [4/328] Building C object libespsi_drv/CMakeFiles/espsi_drv.dir/noboot_debug/src/esps_drv_dispatcher.c.obj
2022-10-17 10:36:56,598 | DEBUG    | run_cmd:153 |  [5/328] Building C object libespsi_drv/CMakeFiles/espsi_drv.dir/noboot_debug/src/esps_drv.c.obj
.
.
.
2022-10-17 10:39:03,323 | DEBUG    | run_cmd:153 |  [324/328] Building C object libespf_sub/payload_ctrl/CMakeFiles/payload_ctrl.dir/noboot_debug/src/payload_ctrl.c.obj
2022-10-17 10:39:03,324 | DEBUG    | run_cmd:153 |  [325/328] Building C object libespf_sub/payload_ctrl/CMakeFiles/payload_ctrl.dir/noboot_debug/fp/Payload_Control/v0.1/Payload_Control_server/FP_Payload_ControlServerApp.c.obj
2022-10-17 10:39:03,324 | DEBUG    | run_cmd:153 |  [326/328] Linking C static library libespf_sub\payload_ctrl\noboot_debug\libpayload_ctrl.a
2022-10-17 10:39:10,456 | DEBUG    | run_cmd:153 |  [327/328] Linking C static library libespf_sub\noboot_debug\libespf_sub.a
2022-10-17 10:39:10,456 | DEBUG    | run_cmd:153 |  [328/328] Linking C executable noboot_debug\OBC_STDPF_STM32H.elf
2022-10-17 10:39:10,456 | DEBUG    | run_cmd:153 |     text    data     bss     dec     hex filename
2022-10-17 10:39:10,456 | DEBUG    | run_cmd:153 |   334752   26080  127160  487992   77238 C:/Projects/OBC/demo/3.0.2.sdk/build/noboot_debug/OBC_STDPF_STM32H.elf
2022-10-17 10:39:10,457 | DEBUG    | run_cmd:153 |  EnduroSat -macaron- build front-end [v0.2]
2022-10-17 10:39:10,457 | DEBUG    | run_cmd:153 |  macaron.py started with args: Namespace(build=None, release_ver=None, clean=False, clean_gen_content=WindowsPath(&#39;C:/Projects/OBC/demo/3.0.2.sdk/build/../espf&#39;), fp_gen=False, datacache_gen=False, fp_gen_all=False, depl_config=&#39;&#39;, fp_merge_root=WindowsPath(&#39;.&#39;), verbose=False, error_out_only=False, reset_log=False)
2022-10-17 10:39:10,457 | DEBUG    | run_cmd:153 |  ESPF_ROOT_BUILD_PATH environment variable not set. Using default path setting resolving to &quot;C:\Projects\OBC\demo\3.0.2.sdk&quot;.
2022-10-17 10:39:10,457 | DEBUG    | run_cmd:153 |  cleaning up all directories with name &quot;src-gen-c&quot; under &quot;C:\Projects\OBC\demo\3.0.2.sdk\espf&quot;...
2022-10-17 10:39:10,485 | INFO     | print_cmd_info:130 | &gt;  command finished successfully!
2022-10-17 10:39:10,485 | INFO     | &lt;module&gt;:463 | &gt;&gt;&gt; BUILD OK (140.60 sec) &lt;&lt;&lt;
2022-10-17 10:39:10,486 | INFO     | clean_directories_by_name:115 | cleaning up all directories with name &quot;src-gen-c&quot; under &quot;C:\Projects\OBC\demo\3.0.2.sdk\build&quot;...
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you start <code>macaron.py</code> without any options, you will see a list of all options available. Feel free to experiment with those.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Finding build errors more easily...</p>
<p>If something goes wrong with the build, you can pass the <code>-v</code> option to <em><abbr title="EnduroSat OBC build system wrapper which provides a user-friendly command-line interface to the most commonly used build and flashing operations">macaron</abbr></em> to get even more details printed.
<br>
<br>
Also, <em><abbr title="EnduroSat OBC build system wrapper which provides a user-friendly command-line interface to the most commonly used build and flashing operations">macaron</abbr></em> stores a full log of the build process in a file called <code>build/macaron.log</code>. You can open it with any text editor (best viewed with <a href="https://code.visualstudio.com/">Visual Studio Code</a> due to highglighting support for log files) and inspect what went wrong by searching for <code>error</code> or <code>warn</code> keywords.</p>
</div>
<h2 id="cmake-build-organization">CMake build organization</h2>
<p>The <abbr title="On-board Computer">OBC</abbr> SDK CMake build is organized in a multi-level hierarchy to promote modularity and enable code reuse at different levels. The overall build structure can be presented in the following way:</p>
<p><center><a class="glightbox" href="../assets/plantuml/img/cmake_build_hierarchy.svg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="CMake build hierarchy" src="../assets/plantuml/img/cmake_build_hierarchy.svg" /></a></center>
<center><b><abbr title="On-board Computer">OBC</abbr> SDK CMake files hierarchy<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></b></center></p>
<p>Each <code>CMakeLists.txt</code> file (apart from the top-most) in the build produces a static library and those libraries get linked together to form the final executable image.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Not all parts of the <abbr title="On-board Computer">OBC</abbr> SDK source code are implemented as static libraries. It makes sense to do this for implementations which are reusable between multiple projects or which do not change often, thus decreasing the compilation time required for the whole project.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For a detailed information on the <code>CMakeLists.txt</code> file for the <abbr title="On-board Computer">OBC</abbr> SDK documentation, please check the comments inside that file. This document does not aim to repeat this information here to ensure the information is always up-to-date.</p>
</div>
<h2 id="build-version">Build version</h2>
<p>The build tool, <abbr title="EnduroSat OBC build system wrapper which provides a user-friendly command-line interface to the most commonly used build and flashing operations">macaron</abbr>, gives the option to set the release version of the code which is going to be passed to CMake which will define the version and the description of the build. The format <abbr title="EnduroSat OBC build system wrapper which provides a user-friendly command-line interface to the most commonly used build and flashing operations">macaron</abbr> expects is:</p>
<p><b>M</b>ayor.<b>m</b>inor.<b>p</b>atch-label (<code>MM.mm.pp[-label]</code>)</p>
<p>The <em>label</em> is going to be added to the build description reported by the <abbr title="On-board Computer">OBC</abbr>, which by default will be <code>"STDPF-STM32H_&lt;label&gt;"</code>. The maximum length of this field is <strong>30 chars</strong> and a longer string will be <strong>truncated</strong>.</p>
<p>The version string will be written in a file, <code>&lt;OBC SDK&gt;/version</code>, and CMake will use that file to define the version variables that are going to be used for building the code. If CMake can't read a valid version string from the file, it will use a default version.</p>
<h3 id="default-build-version">Default build version</h3>
<p>When the build is triggered without specifying the release version (<code>--release-ver</code> option), <abbr title="EnduroSat OBC build system wrapper which provides a user-friendly command-line interface to the most commonly used build and flashing operations">macaron</abbr> will then get the latest tag it can find using git, and use that as a version. The version is obtained by using the command <code>git describe</code> (more info about it in the <a href="https://git-scm.com/docs/git-describe">official git documentation</a>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If the <abbr title="On-board Computer">OBC</abbr> SDK is not part of a git respository or no tags are found, <abbr title="EnduroSat OBC build system wrapper which provides a user-friendly command-line interface to the most commonly used build and flashing operations">macaron</abbr> will set a default version: <code>99.99.99-dev</code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is not recommended to leave the default version value <code>99.99.99-dev</code>. The user should use the SDK version instead.</p>
</div>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>This is only an illustration how the build is structured and may not exactly match the real structure of this project.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="footer.title">
      
        
        <a href="devguide_dirstructure.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Directory structure" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Directory structure
            </div>
          </div>
        </a>
      
      
        
        <a href="devguide_buildcfg.html" class="md-footer__link md-footer__link--next" aria-label="Next: Build-time configuration" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Build-time configuration
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <i>Privileged and confidential</i>
          </div>
        
      </div>
      <div class="md-social">
  
    
    
    
    
    <a href="https://www.linkedin.com/company/endurosat/" target="_blank" rel="noopener" title="EnduroSat on LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
<script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.annotate", "search.suggest", "search.highlight", "search.share", "navigation.tabs", "navigation.top", "toc.integrate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    


    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>