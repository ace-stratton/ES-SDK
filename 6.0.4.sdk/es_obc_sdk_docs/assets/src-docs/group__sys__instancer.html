<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EnduroSat On-Board Computer SDK Documentation: System Instancer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
$darkmode
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="../../index.html"><img alt="Logo" src="EnduroSat_horLogo_symbol@2x-min.png"/></a></td>
  <td id="projectalign">
   <div id="projectname">EnduroSat On-Board Computer SDK Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__sys__instancer.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a>  </div>
  <div class="headertitle"><div class="title">System Instancer<div class="ingroups"><a class="el" href="group___libraries.html">Libraries</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:if__sys__conf_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="if__sys__conf_8h.html">if_sys_conf.h</a></td></tr>
<tr class="memdesc:if__sys__conf_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Types and declarations of the runtime configuration checks. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:if__sys__mod_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="if__sys__mod_8h.html">if_sys_mod.h</a></td></tr>
<tr class="memdesc:if__sys__mod_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">System Module interface definition. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:sys__conf_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__conf_8c.html">sys_conf.c</a></td></tr>
<tr class="memdesc:sys__conf_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runtime configuration verification. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:sys__mod_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__mod_8c.html">sys_mod.c</a></td></tr>
<tr class="memdesc:sys__mod_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interfaces of the modules defined during the runtime configuration (sys_conf). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:if__sys__instancer_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="if__sys__instancer_8h.html">if_sys_instancer.h</a></td></tr>
<tr class="memdesc:if__sys__instancer_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">sys instanscer public interface <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:sys__instancer_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__instancer_8c.html">sys_instancer.c</a></td></tr>
<tr class="memdesc:sys__instancer_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file has to define the logic of calling the initialisation (using the <a class="el" href="if__sys__mod_8h.html" title="System Module interface definition.">if_sys_mod.h</a>) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:sys__instancer__ct_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__instancer__ct_8h.html">sys_instancer_ct.h</a></td></tr>
<tr class="memdesc:sys__instancer__ct_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">sys instancer c types <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >The system instancer provides an interface to control several modules at the same time. It allows to initialize different levels (peripherals, memory or OS) of the modules. This way, depending on the application situation, the system can start or stop all the peripherals, memory or OS dependencies in the modules as required.</p>
<h3><a class="anchor" id="autotoc_md96"></a>
Sys Mod interface</h3>
<p >These functions are defined for each of the modules:</p>
<ul>
<li><code>init(level)</code>: Initialize a specific level of the module</li>
<li><code>run()</code>: Start any threads or OS dependencies (and start TaskMonitor monitoring)</li>
<li><code>stop()</code>: Pause any thread execution (and stop TaskMonitor from monitoring)</li>
<li><code>deinit(level)</code>: Deinitialize a specific level</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Not all the modules have all the interface functions defined but at least <code>init()</code> and <code>deinit()</code> are supported.</dd></dl>
<p>All the modules will be initialized at the same time when using the sys_instancer: </p><div class="fragment"><div class="line">my_user_function(){</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// something critical just happened...</span></div>
<div class="line">    <span class="comment">// Deinitialize all the modules</span></div>
<div class="line">    <span class="keywordflow">if</span>(! <a class="code hl_function" href="if__sys__instancer_8h.html#af3c9ad7d4d9c05111d5b643505f0315b">sys_inst_deinit</a>(INIT_MEM))</div>
<div class="line">        <a class="code hl_function" href="main_8c.html#a1730ffe1e560465665eb47d9264826f9">Error_Handler</a>();</div>
<div class="line">    <span class="keywordflow">if</span>(! <a class="code hl_function" href="if__sys__instancer_8h.html#af3c9ad7d4d9c05111d5b643505f0315b">sys_inst_deinit</a>(<a class="code hl_enumvalue" href="sys__instancer__ct_8h.html#a179ce44d23eba1fde86f591071299475afa37c84753a344eea149c9eeabfc1ebc">INIT_HW</a>))</div>
<div class="line">        <a class="code hl_function" href="main_8c.html#a1730ffe1e560465665eb47d9264826f9">Error_Handler</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (! <a class="code hl_function" href="if__sys__instancer_8h.html#af3c9ad7d4d9c05111d5b643505f0315b">sys_inst_deinit</a>(<a class="code hl_enumvalue" href="sys__instancer__ct_8h.html#a179ce44d23eba1fde86f591071299475af38d0d64225c723535baef3c66295cc7">INIT_OS</a>))</div>
<div class="line">        <a class="code hl_function" href="main_8c.html#a1730ffe1e560465665eb47d9264826f9">Error_Handler</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// If we recovered, we can now initiailized everything</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// MEMORY Initialization</span></div>
<div class="line">    <span class="keywordflow">if</span>(! <a class="code hl_function" href="if__sys__instancer_8h.html#ad29bed16c0a96ddd5347964856589961">sys_inst_init</a>(INIT_MEM))</div>
<div class="line">        <a class="code hl_function" href="main_8c.html#a1730ffe1e560465665eb47d9264826f9">Error_Handler</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize the gnss configuration if the GNSS module is active</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code hl_function" href="if__sys__conf_8h.html#a737b08b8d8e9532c18424811f9b16a92">sys_conf_is_module_active</a>(SYS_MODULE_ID_GNSS))</div>
<div class="line">        gnss_config_init();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// HW (peripherals) Initialization</span></div>
<div class="line">    <span class="keywordflow">if</span>(! <a class="code hl_function" href="if__sys__instancer_8h.html#ad29bed16c0a96ddd5347964856589961">sys_inst_init</a>(<a class="code hl_enumvalue" href="sys__instancer__ct_8h.html#a179ce44d23eba1fde86f591071299475afa37c84753a344eea149c9eeabfc1ebc">INIT_HW</a>))</div>
<div class="line">        <a class="code hl_function" href="main_8c.html#a1730ffe1e560465665eb47d9264826f9">Error_Handler</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// OS Initialization</span></div>
<div class="line">    <span class="keywordflow">if</span> (! <a class="code hl_function" href="if__sys__instancer_8h.html#ad29bed16c0a96ddd5347964856589961">sys_inst_init</a>(<a class="code hl_enumvalue" href="sys__instancer__ct_8h.html#a179ce44d23eba1fde86f591071299475af38d0d64225c723535baef3c66295cc7">INIT_OS</a>))</div>
<div class="line">        <a class="code hl_function" href="main_8c.html#a1730ffe1e560465665eb47d9264826f9">Error_Handler</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Selectively initialize services depending on the active modules</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="if__sys__conf_8h.html#a737b08b8d8e9532c18424811f9b16a92">sys_conf_is_module_active</a>(SYS_MODULE_ID_EPS_I)</div>
<div class="line">     || <a class="code hl_function" href="if__sys__conf_8h.html#a737b08b8d8e9532c18424811f9b16a92">sys_conf_is_module_active</a>(SYS_MODULE_ID_EPS_II)</div>
<div class="line">     || <a class="code hl_function" href="if__sys__conf_8h.html#a737b08b8d8e9532c18424811f9b16a92">sys_conf_is_module_active</a>(SYS_MODULE_ID_EPS_M))</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_function" href="eps__ctrl_8h.html#adced6ae767066b782aa052433ed1bb25">eps_ctrl_init</a>();</div>
<div class="line">        <a class="code hl_function" href="_task_monitor_8c.html#a00e457c6fd90bf8afdb9940783b26f28">task_mon_set_task_policy</a>(TASK_EPS_CTRL, TASK_MON_POLICY_MONITOR);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code hl_function" href="if__sys__conf_8h.html#a737b08b8d8e9532c18424811f9b16a92">sys_conf_is_module_active</a>(SYS_MODULE_ID_CUBE_ADCS))</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_function" href="adcs__tlm_8c.html#a61dc0a29a73af24ab6e87943a2372198">ADCS_TLM_TaskInit</a>();</div>
<div class="line">        <a class="code hl_function" href="_task_monitor_8c.html#a00e457c6fd90bf8afdb9940783b26f28">task_mon_set_task_policy</a>(TASK_ADCS_TLM, TASK_MON_POLICY_MONITOR);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="a_task_monitor_8c_html_a00e457c6fd90bf8afdb9940783b26f28"><div class="ttname"><a href="_task_monitor_8c.html#a00e457c6fd90bf8afdb9940783b26f28">task_mon_set_task_policy</a></div><div class="ttdeci">void task_mon_set_task_policy(TASK_MONITOR_TasksEnum task, task_mon_policy_t policy)</div><div class="ttdoc">Called from the if_sys_mod to start or stop monitoring a task.</div><div class="ttdef"><b>Definition:</b> <a href="_task_monitor_8c_source.html#l00244">TaskMonitor.c:244</a></div></div>
<div class="ttc" id="aadcs__tlm_8c_html_a61dc0a29a73af24ab6e87943a2372198"><div class="ttname"><a href="adcs__tlm_8c.html#a61dc0a29a73af24ab6e87943a2372198">ADCS_TLM_TaskInit</a></div><div class="ttdeci">void ADCS_TLM_TaskInit(void)</div><div class="ttdoc">Initialise the ADCS Telemetry Task.</div><div class="ttdef"><b>Definition:</b> <a href="adcs__tlm_8c_source.html#l00084">adcs_tlm.c:84</a></div></div>
<div class="ttc" id="aeps__ctrl_8h_html_adced6ae767066b782aa052433ed1bb25"><div class="ttname"><a href="eps__ctrl_8h.html#adced6ae767066b782aa052433ed1bb25">eps_ctrl_init</a></div><div class="ttdeci">bool eps_ctrl_init(void)</div><div class="ttdoc">Initializes the EPS controller service and start of task monitoring.</div><div class="ttdef"><b>Definition:</b> <a href="eps__ctrl_8c_source.html#l00087">eps_ctrl.c:87</a></div></div>
<div class="ttc" id="aif__sys__conf_8h_html_a737b08b8d8e9532c18424811f9b16a92"><div class="ttname"><a href="if__sys__conf_8h.html#a737b08b8d8e9532c18424811f9b16a92">sys_conf_is_module_active</a></div><div class="ttdeci">bool sys_conf_is_module_active(sys_module_id_t id)</div><div class="ttdoc">Determine if a module is active in the binary configuration.</div><div class="ttdef"><b>Definition:</b> <a href="sys__conf_8c_source.html#l00095">sys_conf.c:95</a></div></div>
<div class="ttc" id="aif__sys__instancer_8h_html_ad29bed16c0a96ddd5347964856589961"><div class="ttname"><a href="if__sys__instancer_8h.html#ad29bed16c0a96ddd5347964856589961">sys_inst_init</a></div><div class="ttdeci">bool sys_inst_init(sys_init_level_id_t level)</div><div class="ttdoc">Initialise the selected system level for all the active modules.</div><div class="ttdef"><b>Definition:</b> <a href="sys__instancer_8c_source.html#l00025">sys_instancer.c:25</a></div></div>
<div class="ttc" id="aif__sys__instancer_8h_html_af3c9ad7d4d9c05111d5b643505f0315b"><div class="ttname"><a href="if__sys__instancer_8h.html#af3c9ad7d4d9c05111d5b643505f0315b">sys_inst_deinit</a></div><div class="ttdeci">bool sys_inst_deinit(sys_init_level_id_t level)</div><div class="ttdoc">Deinitialise the selected system level.</div><div class="ttdef"><b>Definition:</b> <a href="sys__instancer_8c_source.html#l00058">sys_instancer.c:58</a></div></div>
<div class="ttc" id="amain_8c_html_a1730ffe1e560465665eb47d9264826f9"><div class="ttname"><a href="main_8c.html#a1730ffe1e560465665eb47d9264826f9">Error_Handler</a></div><div class="ttdeci">void Error_Handler(void)</div><div class="ttdoc">This function is called when an error occurs. It sets the LEDs in a specific state.</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00336">main.c:336</a></div></div>
<div class="ttc" id="asys__instancer__ct_8h_html_a179ce44d23eba1fde86f591071299475af38d0d64225c723535baef3c66295cc7"><div class="ttname"><a href="sys__instancer__ct_8h.html#a179ce44d23eba1fde86f591071299475af38d0d64225c723535baef3c66295cc7">INIT_OS</a></div><div class="ttdeci">@ INIT_OS</div><div class="ttdef"><b>Definition:</b> <a href="sys__instancer__ct_8h_source.html#l00032">sys_instancer_ct.h:32</a></div></div>
<div class="ttc" id="asys__instancer__ct_8h_html_a179ce44d23eba1fde86f591071299475afa37c84753a344eea149c9eeabfc1ebc"><div class="ttname"><a href="sys__instancer__ct_8h.html#a179ce44d23eba1fde86f591071299475afa37c84753a344eea149c9eeabfc1ebc">INIT_HW</a></div><div class="ttdeci">@ INIT_HW</div><div class="ttdef"><b>Definition:</b> <a href="sys__instancer__ct_8h_source.html#l00031">sys_instancer_ct.h:31</a></div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The function <a class="el" href="if__sys__conf_8h.html#a737b08b8d8e9532c18424811f9b16a92" title="Determine if a module is active in the binary configuration.">sys_conf_is_module_active()</a> returns true if the module is active. This way you can implement module dependent code without recompiling the OBC.</dd></dl>
<h3><a class="anchor" id="autotoc_md97"></a>
es-sys-config</h3>
<p ><b>es-sys-config</b> is a python tool that will help to flash the system configuration in the OBC flash. It is located in <code>other/scripts/sys_config_generation</code>. More information about the usage can be found there.</p>
<p >For more information about the Runtime Configuration, refer to the OBC SDK documentation. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by Doxygen 1.9.4 </li>
  </ul>
</div>
</body>
</html>
