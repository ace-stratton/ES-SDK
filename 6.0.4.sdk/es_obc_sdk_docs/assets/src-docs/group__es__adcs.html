<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EnduroSat On-Board Computer SDK Documentation: EnduroSat ADCS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
$darkmode
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="../../index.html"><img alt="Logo" src="EnduroSat_horLogo_symbol@2x-min.png"/></a></td>
  <td id="projectalign">
   <div id="projectname">EnduroSat On-Board Computer SDK Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__es__adcs.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a>  </div>
  <div class="headertitle"><div class="title">EnduroSat ADCS<div class="ingroups"><a class="el" href="group___services.html">Services</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:es__adcs_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="es__adcs_8h.html">es_adcs.h</a></td></tr>
<tr class="memdesc:es__adcs_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">EnduroSat ADCS main header file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:es__adcs__controllers_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="es__adcs__controllers_8h.html">es_adcs_controllers.h</a></td></tr>
<tr class="memdesc:es__adcs__controllers_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">EnduroSat ADCS controller submodule header file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:es__adcs__estimators_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="es__adcs__estimators_8h.html">es_adcs_estimators.h</a></td></tr>
<tr class="memdesc:es__adcs__estimators_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">EnduroSat ADCS estimator submodule header file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:es__adcs__math_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="es__adcs__math_8h.html">es_adcs_math.h</a></td></tr>
<tr class="memdesc:es__adcs__math_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">EnduroSat ADCS math functionality header file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:es__adcs__types_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="es__adcs__types_8h.html">es_adcs_types.h</a></td></tr>
<tr class="memdesc:es__adcs__types_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">EnduroSat ADCS types file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:es__adcs_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="es__adcs_8c.html">es_adcs.c</a></td></tr>
<tr class="memdesc:es__adcs_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">EnduroSat ADCS main source file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:es__adcs__controllers_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="es__adcs__controllers_8c.html">es_adcs_controllers.c</a></td></tr>
<tr class="memdesc:es__adcs__controllers_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">EnduroSat ADCS controller submodule source file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:es__adcs__estimators_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="es__adcs__estimators_8c.html">es_adcs_estimators.c</a></td></tr>
<tr class="memdesc:es__adcs__estimators_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">EnduroSat ADCS estimator submodule source file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:es__adcs__math_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="es__adcs__math_8c.html">es_adcs_math.c</a></td></tr>
<tr class="memdesc:es__adcs__math_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">EnduroSat ADCS math functionality source file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >EnduroSat ADCS for 1U/1.5U satellites</p>
<h2><a class="anchor" id="autotoc_md130"></a>
Initiating Mode Transitions</h2>
<h3><a class="anchor" id="autotoc_md131"></a>
From inside the OBC SDK</h3>
<p >The mode transitions can be triggered using <b><a class="el" href="es__adcs_8h.html#add7be486478a0158ca75cbaa0c6710f9" title="Set the ADCS HSM mode.">es_adcs_set_op_mode(uint8_t desiredOpMode)</a></b>. The possible modes are shown below:</p>
<div class="fragment"><div class="line"><span class="comment">// Stated identifiers</span></div>
<div class="line"><span class="keyword">enum</span> es_adcs_op_modes_sm_states</div>
<div class="line">{</div>
<div class="line">    STATE_ROOT,</div>
<div class="line">    STATE_ADCS_RUN,</div>
<div class="line">    STATE_ADCS_TRIGGER,</div>
<div class="line">    STATE_ADCS_IDLE,</div>
<div class="line">    STATE_ADCS_NOT_INIT,</div>
<div class="line">    STATE_MAX</div>
<div class="line">};</div>
</div><!-- fragment --><p >where <b>STATE_ROOT</b>, <b>STATE_ADCS_NOT_INIT</b> and <b>STATE_MAX</b> are internal states and <b>are not</b> part of the ES ADCS operational modes. Passing them as parameter to the function will result in an error.</p>
<h3><a class="anchor" id="autotoc_md132"></a>
From outside the OBC SDK (using FIDL)</h3>
<p >The mode transitions can be triggered using the <b>OBC_ES_ADCS_SET_OP_MODE</b> function found in <code>&lt;OBC SDK&gt;/espf/core/fidl/obc/fp/OBC_ES_ADCS.fidl</code>. The function has a reduced parameter list that excludes the internal states <b>STATE_ROOT</b>, <b>STATE_ADCS_NOT_INIT</b> and <b>STATE_MAX</b>.</p>
<h2><a class="anchor" id="autotoc_md133"></a>
Reading status information</h2>
<h3><a class="anchor" id="autotoc_md134"></a>
From inside the OBC SDK</h3>
<p >The main status information can be retrieved using <b><a class="el" href="es__adcs_8h.html#a1a2bc3b8d716c399d67a0cf26dcb9cad" title="Get the ADCS module current status.">es_adcs_get_status()</a></b>. The return type is shown below:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumeration" href="es__adcs__types_8h.html#a23b21af9e7f666fa99fed60a20387009">es_adcs_result_t</a> estimatorResult;     <span class="comment">// Estimator general result</span></div>
<div class="line">    <a class="code hl_enumeration" href="es__adcs__types_8h.html#a23b21af9e7f666fa99fed60a20387009">es_adcs_result_t</a> controllerResult;    <span class="comment">// Controller general result</span></div>
<div class="line">    uint8_t adcs_hsm_state;               <span class="comment">// The corresponding enum is es_adcs_op_modes_sm_states</span></div>
<div class="line">} <a class="code hl_struct" href="structes__adcs__status__t.html">es_adcs_status_t</a>;</div>
<div class="ttc" id="aes__adcs__types_8h_html_a23b21af9e7f666fa99fed60a20387009"><div class="ttname"><a href="es__adcs__types_8h.html#a23b21af9e7f666fa99fed60a20387009">es_adcs_result_t</a></div><div class="ttdeci">es_adcs_result_t</div><div class="ttdoc">General ADCS result enum.</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__types_8h_source.html#l00044">es_adcs_types.h:45</a></div></div>
<div class="ttc" id="astructes__adcs__status__t_html"><div class="ttname"><a href="structes__adcs__status__t.html">es_adcs_status_t</a></div><div class="ttdoc">General ADCS status.</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs_8h_source.html#l00249">es_adcs.h:250</a></div></div>
</div><!-- fragment --><p >where the <b>es_adcs_result_t</b> is as follows:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__types_8h.html#a23b21af9e7f666fa99fed60a20387009a6f2047927b7d1231ee1f5e396b4c5915">ES_ADCS_RESULT_OK</a>,           <span class="comment">// Operation was successful</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__types_8h.html#a23b21af9e7f666fa99fed60a20387009a097c4ab60f32d7b95bc588e455a12aad">ES_ADCS_RESULT_INIT_FAIL</a>,    <span class="comment">// ADCS initialization failed</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__types_8h.html#a23b21af9e7f666fa99fed60a20387009af431f371a7911b2f3159a0781ead3f66">ES_ADCS_RESULT_FAIL</a>          <span class="comment">// Operation has failed</span></div>
<div class="line">} <a class="code hl_enumeration" href="es__adcs__types_8h.html#a23b21af9e7f666fa99fed60a20387009">es_adcs_result_t</a>;</div>
<div class="ttc" id="aes__adcs__types_8h_html_a23b21af9e7f666fa99fed60a20387009a097c4ab60f32d7b95bc588e455a12aad"><div class="ttname"><a href="es__adcs__types_8h.html#a23b21af9e7f666fa99fed60a20387009a097c4ab60f32d7b95bc588e455a12aad">ES_ADCS_RESULT_INIT_FAIL</a></div><div class="ttdeci">@ ES_ADCS_RESULT_INIT_FAIL</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__types_8h_source.html#l00048">es_adcs_types.h:48</a></div></div>
<div class="ttc" id="aes__adcs__types_8h_html_a23b21af9e7f666fa99fed60a20387009a6f2047927b7d1231ee1f5e396b4c5915"><div class="ttname"><a href="es__adcs__types_8h.html#a23b21af9e7f666fa99fed60a20387009a6f2047927b7d1231ee1f5e396b4c5915">ES_ADCS_RESULT_OK</a></div><div class="ttdeci">@ ES_ADCS_RESULT_OK</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__types_8h_source.html#l00046">es_adcs_types.h:46</a></div></div>
<div class="ttc" id="aes__adcs__types_8h_html_a23b21af9e7f666fa99fed60a20387009af431f371a7911b2f3159a0781ead3f66"><div class="ttname"><a href="es__adcs__types_8h.html#a23b21af9e7f666fa99fed60a20387009af431f371a7911b2f3159a0781ead3f66">ES_ADCS_RESULT_FAIL</a></div><div class="ttdeci">@ ES_ADCS_RESULT_FAIL</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__types_8h_source.html#l00051">es_adcs_types.h:49</a></div></div>
</div><!-- fragment --><p >Estimator specific status can be obtained using <b><a class="el" href="es__adcs_8h.html#af7417d53efcc740d450b594dc7fb43ed" title="Get the estimator submodule current status.">es_adcs_get_status_estimator()</a></b>. The return type is shown below:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumeration" href="es__adcs__estimators_8h.html#af7ec35a8b1b98ee35951f7cbc2fb88f3">es_adcs_estimator_warning_t</a>     lastWarningGeneral;                           <span class="comment">// General estimator warning</span></div>
<div class="line">    <a class="code hl_enumeration" href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689">es_adcs_estimator_error_t</a>       lastErrorGeneral;                             <span class="comment">// General estimator error</span></div>
<div class="line">    <a class="code hl_struct" href="structes__adcs__estimator__algo__status__t.html">es_adcs_estimator_algo_status_t</a> algoStatus[<a class="code hl_define" href="es__adcs__types_8h.html#a421a02d7e49f333309d6d83ad8e0d7dd">ES_ADCS_ACTIVE_ESTIMATORS_MAX</a>];    <span class="comment">// Status variable for each executed estimator</span></div>
<div class="line">} <a class="code hl_struct" href="structes__adcs__estimator__status__t.html">es_adcs_estimator_status_t</a>;</div>
<div class="ttc" id="aes__adcs__estimators_8h_html_a00ec304fc7c5e84217ea24eb1248b689"><div class="ttname"><a href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689">es_adcs_estimator_error_t</a></div><div class="ttdeci">es_adcs_estimator_error_t</div><div class="ttdoc">Estimator error enum.</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00037">es_adcs_estimators.h:38</a></div></div>
<div class="ttc" id="aes__adcs__estimators_8h_html_af7ec35a8b1b98ee35951f7cbc2fb88f3"><div class="ttname"><a href="es__adcs__estimators_8h.html#af7ec35a8b1b98ee35951f7cbc2fb88f3">es_adcs_estimator_warning_t</a></div><div class="ttdeci">es_adcs_estimator_warning_t</div><div class="ttdoc">Estimator warning enum.</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00029">es_adcs_estimators.h:30</a></div></div>
<div class="ttc" id="aes__adcs__types_8h_html_a421a02d7e49f333309d6d83ad8e0d7dd"><div class="ttname"><a href="es__adcs__types_8h.html#a421a02d7e49f333309d6d83ad8e0d7dd">ES_ADCS_ACTIVE_ESTIMATORS_MAX</a></div><div class="ttdeci">#define ES_ADCS_ACTIVE_ESTIMATORS_MAX</div><div class="ttdoc">Maximum amount of concurrent estimators.</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__types_8h_source.html#l00036">es_adcs_types.h:36</a></div></div>
<div class="ttc" id="astructes__adcs__estimator__algo__status__t_html"><div class="ttname"><a href="structes__adcs__estimator__algo__status__t.html">es_adcs_estimator_algo_status_t</a></div><div class="ttdoc">Estimator algorithm specific status.</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00049">es_adcs_estimators.h:50</a></div></div>
<div class="ttc" id="astructes__adcs__estimator__status__t_html"><div class="ttname"><a href="structes__adcs__estimator__status__t.html">es_adcs_estimator_status_t</a></div><div class="ttdoc">Estimator status.</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00057">es_adcs_estimators.h:58</a></div></div>
</div><!-- fragment --><p >where <b>es_adcs_estimator_warning_t</b> is as follows:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__estimators_8h.html#af7ec35a8b1b98ee35951f7cbc2fb88f3a784563303caddaa200ebb5f6138ac841">ES_ADCS_ESTIMATOR_WARN_NONE</a>,      <span class="comment">// No estimator warnings</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__estimators_8h.html#af7ec35a8b1b98ee35951f7cbc2fb88f3a881a743919ccd834294e559c40b44416">ES_ADCS_ESTIMATOR_WARN_GENERAL</a>    <span class="comment">// Estimator general warning</span></div>
<div class="line">} <a class="code hl_enumeration" href="es__adcs__estimators_8h.html#af7ec35a8b1b98ee35951f7cbc2fb88f3">es_adcs_estimator_warning_t</a>;</div>
<div class="ttc" id="aes__adcs__estimators_8h_html_af7ec35a8b1b98ee35951f7cbc2fb88f3a784563303caddaa200ebb5f6138ac841"><div class="ttname"><a href="es__adcs__estimators_8h.html#af7ec35a8b1b98ee35951f7cbc2fb88f3a784563303caddaa200ebb5f6138ac841">ES_ADCS_ESTIMATOR_WARN_NONE</a></div><div class="ttdeci">@ ES_ADCS_ESTIMATOR_WARN_NONE</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00031">es_adcs_estimators.h:31</a></div></div>
<div class="ttc" id="aes__adcs__estimators_8h_html_af7ec35a8b1b98ee35951f7cbc2fb88f3a881a743919ccd834294e559c40b44416"><div class="ttname"><a href="es__adcs__estimators_8h.html#af7ec35a8b1b98ee35951f7cbc2fb88f3a881a743919ccd834294e559c40b44416">ES_ADCS_ESTIMATOR_WARN_GENERAL</a></div><div class="ttdeci">@ ES_ADCS_ESTIMATOR_WARN_GENERAL</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00034">es_adcs_estimators.h:32</a></div></div>
</div><!-- fragment --><p >and <b>es_adcs_estimator_error_t</b> is one of the following:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689a33bd0df1b542b27b7be40ac58f4d6057">ES_ADCS_ESTIMATOR_ERROR_NONE</a>,                    <span class="comment">// No estimator errors</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689ac55b7c5c9749c48478c0286e20777088">ES_ADCS_ESTIMATOR_ERROR_DATA_CACHE_GET</a>,          <span class="comment">// Estimator has failed to retrieve data from the DataCache</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689a94b7c1d884ac8628303b8f814cbd1d40">ES_ADCS_ESTIMATOR_ERROR_MAGNETOMETER_INVALID</a>,    <span class="comment">// Estimator has failed to identify a valid magnetometer</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689a8979e96e6043c3c2630b1f23361ddb78">ES_ADCS_ESTIMATOR_ERROR_INVALID_ALGO</a>,            <span class="comment">// Estimator has failed to identify a valid algorithm</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689ad16c88b754ee15dc506f9421b7d227ca">ES_ADCS_ESTIMATOR_ERROR_ALGO_IDENTICAL</a>,          <span class="comment">// Estimator is asked to execute two identical algorithms</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689a069ef77f999123ebe52a3b83365f4270">ES_ADCS_ESTIMATOR_ERROR_GENERAL</a>                  <span class="comment">// Estimator general error</span></div>
<div class="line">} <a class="code hl_enumeration" href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689">es_adcs_estimator_error_t</a>;</div>
<div class="ttc" id="aes__adcs__estimators_8h_html_a00ec304fc7c5e84217ea24eb1248b689a069ef77f999123ebe52a3b83365f4270"><div class="ttname"><a href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689a069ef77f999123ebe52a3b83365f4270">ES_ADCS_ESTIMATOR_ERROR_GENERAL</a></div><div class="ttdeci">@ ES_ADCS_ESTIMATOR_ERROR_GENERAL</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00046">es_adcs_estimators.h:44</a></div></div>
<div class="ttc" id="aes__adcs__estimators_8h_html_a00ec304fc7c5e84217ea24eb1248b689a33bd0df1b542b27b7be40ac58f4d6057"><div class="ttname"><a href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689a33bd0df1b542b27b7be40ac58f4d6057">ES_ADCS_ESTIMATOR_ERROR_NONE</a></div><div class="ttdeci">@ ES_ADCS_ESTIMATOR_ERROR_NONE</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00039">es_adcs_estimators.h:39</a></div></div>
<div class="ttc" id="aes__adcs__estimators_8h_html_a00ec304fc7c5e84217ea24eb1248b689a8979e96e6043c3c2630b1f23361ddb78"><div class="ttname"><a href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689a8979e96e6043c3c2630b1f23361ddb78">ES_ADCS_ESTIMATOR_ERROR_INVALID_ALGO</a></div><div class="ttdeci">@ ES_ADCS_ESTIMATOR_ERROR_INVALID_ALGO</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00042">es_adcs_estimators.h:42</a></div></div>
<div class="ttc" id="aes__adcs__estimators_8h_html_a00ec304fc7c5e84217ea24eb1248b689a94b7c1d884ac8628303b8f814cbd1d40"><div class="ttname"><a href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689a94b7c1d884ac8628303b8f814cbd1d40">ES_ADCS_ESTIMATOR_ERROR_MAGNETOMETER_INVALID</a></div><div class="ttdeci">@ ES_ADCS_ESTIMATOR_ERROR_MAGNETOMETER_INVALID</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00041">es_adcs_estimators.h:41</a></div></div>
<div class="ttc" id="aes__adcs__estimators_8h_html_a00ec304fc7c5e84217ea24eb1248b689ac55b7c5c9749c48478c0286e20777088"><div class="ttname"><a href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689ac55b7c5c9749c48478c0286e20777088">ES_ADCS_ESTIMATOR_ERROR_DATA_CACHE_GET</a></div><div class="ttdeci">@ ES_ADCS_ESTIMATOR_ERROR_DATA_CACHE_GET</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00040">es_adcs_estimators.h:40</a></div></div>
<div class="ttc" id="aes__adcs__estimators_8h_html_a00ec304fc7c5e84217ea24eb1248b689ad16c88b754ee15dc506f9421b7d227ca"><div class="ttname"><a href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689ad16c88b754ee15dc506f9421b7d227ca">ES_ADCS_ESTIMATOR_ERROR_ALGO_IDENTICAL</a></div><div class="ttdeci">@ ES_ADCS_ESTIMATOR_ERROR_ALGO_IDENTICAL</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__estimators_8h_source.html#l00043">es_adcs_estimators.h:43</a></div></div>
</div><!-- fragment --><p >The last member of the struct represents algorithm specific status, each one having a warning and an error part as described below:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumeration" href="es__adcs__estimators_8h.html#af7ec35a8b1b98ee35951f7cbc2fb88f3">es_adcs_estimator_warning_t</a> lastWarningAlgo;    <span class="comment">// Estimator algorithm warning</span></div>
<div class="line">    <a class="code hl_enumeration" href="es__adcs__estimators_8h.html#a00ec304fc7c5e84217ea24eb1248b689">es_adcs_estimator_error_t</a>   lastErrorAlgo;      <span class="comment">// Estimator algorithm error</span></div>
<div class="line">} <a class="code hl_struct" href="structes__adcs__estimator__algo__status__t.html">es_adcs_estimator_algo_status_t</a>;</div>
</div><!-- fragment --><p >The define <b>ES_ADCS_ACTIVE_ESTIMATORS_MAX</b> is set to 2, which is the number of estimation algorithms that can be run concurrently.</p>
<p >Controller specific status can be obtained using <b><a class="el" href="es__adcs_8h.html#a2796b4d4819617b5630d06e9adff62a5" title="Get the controller submodule current status.">es_adcs_get_status_controller()</a></b>. The return type is shown below:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumeration" href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5">es_adcs_controller_warning_t</a>     lastWarningGeneral;    <span class="comment">// General controller warning</span></div>
<div class="line">    <a class="code hl_enumeration" href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9c">es_adcs_controller_error_t</a>       lastErrorGeneral;      <span class="comment">// General controller error</span></div>
<div class="line">    <a class="code hl_struct" href="structes__adcs__controller__algo__status__t.html">es_adcs_controller_algo_status_t</a> algoStatus;            <span class="comment">// Status variable for the executed controller</span></div>
<div class="line">} <a class="code hl_struct" href="structes__adcs__controller__status__t.html">es_adcs_controller_status_t</a>;</div>
<div class="ttc" id="aes__adcs__controllers_8h_html_a255a5245e9b5266c7de70044fe5ce2c5"><div class="ttname"><a href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5">es_adcs_controller_warning_t</a></div><div class="ttdeci">es_adcs_controller_warning_t</div><div class="ttdoc">Controller warning enum.</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00029">es_adcs_controllers.h:30</a></div></div>
<div class="ttc" id="aes__adcs__controllers_8h_html_a405c9daf05ff39a7d25b3eb711f60a9c"><div class="ttname"><a href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9c">es_adcs_controller_error_t</a></div><div class="ttdeci">es_adcs_controller_error_t</div><div class="ttdoc">Controller error enum.</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00039">es_adcs_controllers.h:40</a></div></div>
<div class="ttc" id="astructes__adcs__controller__algo__status__t_html"><div class="ttname"><a href="structes__adcs__controller__algo__status__t.html">es_adcs_controller_algo_status_t</a></div><div class="ttdoc">Controller algorithm specific status.</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00049">es_adcs_controllers.h:50</a></div></div>
<div class="ttc" id="astructes__adcs__controller__status__t_html"><div class="ttname"><a href="structes__adcs__controller__status__t.html">es_adcs_controller_status_t</a></div><div class="ttdoc">Controller status.</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00057">es_adcs_controllers.h:58</a></div></div>
</div><!-- fragment --><p >where <b>es_adcs_controller_warning_t</b> is as follows:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5af3bc0006a1494df51f028f00dcc3a2a9">ES_ADCS_CONTROLLER_WARN_NONE</a>,                <span class="comment">// No controller warnings</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5af15fb3d0f4ac60853b84b5d235f60c3f">ES_ADCS_CONTROLLER_WARN_SATURATION_UPPER</a>,    <span class="comment">// Controller has reached upper limit of allowed control values</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5a7f6048bc8111789937935edecc81d560">ES_ADCS_CONTROLLER_WARN_SATURATION_LOWER</a>,    <span class="comment">// Controller has reached lower limit of allowed control values</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5a123341622a23527ee86768f0fa564af1">ES_ADCS_CONTROLLER_WARN_GENERAL</a>              <span class="comment">// Controller general warning</span></div>
<div class="line">} <a class="code hl_enumeration" href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5">es_adcs_controller_warning_t</a>;</div>
<div class="ttc" id="aes__adcs__controllers_8h_html_a255a5245e9b5266c7de70044fe5ce2c5a123341622a23527ee86768f0fa564af1"><div class="ttname"><a href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5a123341622a23527ee86768f0fa564af1">ES_ADCS_CONTROLLER_WARN_GENERAL</a></div><div class="ttdeci">@ ES_ADCS_CONTROLLER_WARN_GENERAL</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00036">es_adcs_controllers.h:34</a></div></div>
<div class="ttc" id="aes__adcs__controllers_8h_html_a255a5245e9b5266c7de70044fe5ce2c5a7f6048bc8111789937935edecc81d560"><div class="ttname"><a href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5a7f6048bc8111789937935edecc81d560">ES_ADCS_CONTROLLER_WARN_SATURATION_LOWER</a></div><div class="ttdeci">@ ES_ADCS_CONTROLLER_WARN_SATURATION_LOWER</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00033">es_adcs_controllers.h:33</a></div></div>
<div class="ttc" id="aes__adcs__controllers_8h_html_a255a5245e9b5266c7de70044fe5ce2c5af15fb3d0f4ac60853b84b5d235f60c3f"><div class="ttname"><a href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5af15fb3d0f4ac60853b84b5d235f60c3f">ES_ADCS_CONTROLLER_WARN_SATURATION_UPPER</a></div><div class="ttdeci">@ ES_ADCS_CONTROLLER_WARN_SATURATION_UPPER</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00032">es_adcs_controllers.h:32</a></div></div>
<div class="ttc" id="aes__adcs__controllers_8h_html_a255a5245e9b5266c7de70044fe5ce2c5af3bc0006a1494df51f028f00dcc3a2a9"><div class="ttname"><a href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5af3bc0006a1494df51f028f00dcc3a2a9">ES_ADCS_CONTROLLER_WARN_NONE</a></div><div class="ttdeci">@ ES_ADCS_CONTROLLER_WARN_NONE</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00031">es_adcs_controllers.h:31</a></div></div>
</div><!-- fragment --><p >and <b>es_adcs_controller_error_t</b> is one of the following:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9ca670e549cc6afc0aa02e1074f4e02ddce">ES_ADCS_CONTROLLER_ERROR_NONE</a>,              <span class="comment">// No controller errors</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9ca19ff7f55b132c3efbb1bcb0fa6c100b8">ES_ADCS_CONTROLLER_ERROR_DATA_CACHE_GET</a>,    <span class="comment">// Controller has failed to retrieve data from the DataCache</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9cab497bc89fdd3077593d29f2c6f0665ca">ES_ADCS_CONTROLLER_ERROR_INVALID_ALGO</a>,      <span class="comment">// Controller has failed to identify a valid algorithm</span></div>
<div class="line">    <a class="code hl_enumvalue" href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9ca9e3b5b526257f4bb5b345c5ad1bc56c4">ES_ADCS_CONTROLLER_ERROR_GENERAL</a>            <span class="comment">// Controller general error</span></div>
<div class="line">} <a class="code hl_enumeration" href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9c">es_adcs_controller_error_t</a>;</div>
<div class="ttc" id="aes__adcs__controllers_8h_html_a405c9daf05ff39a7d25b3eb711f60a9ca19ff7f55b132c3efbb1bcb0fa6c100b8"><div class="ttname"><a href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9ca19ff7f55b132c3efbb1bcb0fa6c100b8">ES_ADCS_CONTROLLER_ERROR_DATA_CACHE_GET</a></div><div class="ttdeci">@ ES_ADCS_CONTROLLER_ERROR_DATA_CACHE_GET</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00042">es_adcs_controllers.h:42</a></div></div>
<div class="ttc" id="aes__adcs__controllers_8h_html_a405c9daf05ff39a7d25b3eb711f60a9ca670e549cc6afc0aa02e1074f4e02ddce"><div class="ttname"><a href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9ca670e549cc6afc0aa02e1074f4e02ddce">ES_ADCS_CONTROLLER_ERROR_NONE</a></div><div class="ttdeci">@ ES_ADCS_CONTROLLER_ERROR_NONE</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00041">es_adcs_controllers.h:41</a></div></div>
<div class="ttc" id="aes__adcs__controllers_8h_html_a405c9daf05ff39a7d25b3eb711f60a9ca9e3b5b526257f4bb5b345c5ad1bc56c4"><div class="ttname"><a href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9ca9e3b5b526257f4bb5b345c5ad1bc56c4">ES_ADCS_CONTROLLER_ERROR_GENERAL</a></div><div class="ttdeci">@ ES_ADCS_CONTROLLER_ERROR_GENERAL</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00046">es_adcs_controllers.h:44</a></div></div>
<div class="ttc" id="aes__adcs__controllers_8h_html_a405c9daf05ff39a7d25b3eb711f60a9cab497bc89fdd3077593d29f2c6f0665ca"><div class="ttname"><a href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9cab497bc89fdd3077593d29f2c6f0665ca">ES_ADCS_CONTROLLER_ERROR_INVALID_ALGO</a></div><div class="ttdeci">@ ES_ADCS_CONTROLLER_ERROR_INVALID_ALGO</div><div class="ttdef"><b>Definition:</b> <a href="es__adcs__controllers_8h_source.html#l00043">es_adcs_controllers.h:43</a></div></div>
</div><!-- fragment --><p >The last member of the struct represents algorithm specific status, each one having a warning and an error part as described below:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumeration" href="es__adcs__controllers_8h.html#a255a5245e9b5266c7de70044fe5ce2c5">es_adcs_controller_warning_t</a> lastWarningAlgo;    <span class="comment">// Controller algorithm warning</span></div>
<div class="line">    <a class="code hl_enumeration" href="es__adcs__controllers_8h.html#a405c9daf05ff39a7d25b3eb711f60a9c">es_adcs_controller_error_t</a>   lastErrorAlgo;      <span class="comment">// Controller algorithm error</span></div>
<div class="line">} <a class="code hl_struct" href="structes__adcs__controller__algo__status__t.html">es_adcs_controller_algo_status_t</a>;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md135"></a>
From outside the OBC SDK (using FIDL)</h3>
<p >The status functions described above are available through a FIDL file - <code>&lt;OBC SDK&gt;/espf/core/fidl/obc/fp/OBC_ES_ADCS.fidl</code>. Their names are as follows:</p>
<ul>
<li>OBC_ES_ADCS_GET_STATUS</li>
<li>OBC_ES_ADCS_GET_STATUS_ESTIMATORS</li>
<li>OBC_ES_ADCS_GET_STATUS_CONTROLLER</li>
</ul>
<h2><a class="anchor" id="autotoc_md136"></a>
Auxiliary modules</h2>
<h3><a class="anchor" id="autotoc_md137"></a>
Coordsys transformations library</h3>
<p >Within the OBC SDK, the rotation matrices can be changed by using functions found inside the file <code>&lt;OBC SDK&gt;/espf/core/services/es_coordsys/inc/es_coordsys.h</code>.</p>
<p >Saving the active configuration to NVM or loading from NVM can be done using <b><a class="el" href="es__coordsys_8h.html#a3ff52c7348c8a7d05d7971b3ee2810c7" title="Save the current coordinate frames configuration to NVM.">coordSys_save_config_to_NVM()</a></b> and <b><a class="el" href="es__coordsys_8h.html#a179bee47aadd2af0d591493aa8d7b69b" title="Load the current coordinate frames configuration from NVM.">coordSys_load_config_from_NVM()</a></b> respectively.</p>
<p >Outside the OBC SDK (using FIDL), these configurations can be changed using functions found in <code>&lt;OBC SDK&gt;/espf/core/fidl/obc/fp/OBC_ES_COORDSYS.fidl</code>.</p>
<h3><a class="anchor" id="autotoc_md138"></a>
Actuator Control Service</h3>
<p >Within the OBC SDK, the status information can be accessed using <b><a class="el" href="structactuator__control__service__status__t.html" title="Actuator control service status struct.">actuator_control_service_status_t</a> <a class="el" href="actuator__control__service_8h.html#aa04e29b5f626fd6c9c13ef6acba0ade4" title="Retrieve the actuator control service status.">actuator_control_service_get_status()</a></b>.</p>
<p >Outside the OBC SDK (using FIDL), this status information can be accessed using functions in <code>&lt;OBC SDK&gt;/espf/core/fidl/obc/fp/OBC_ACTUATOR_CONTROL_SERVICE.fidl</code>.</p>
<p >Additional functions for start/stop of the service can be found in <code>&lt;OBC SDK&gt;/espf/core/services/actuator_control_service/inc/actuator_control_service.h</code>.</p>
<p >Their FIDL equivalents are found in the already mentioned FIDL file.</p>
<h2><a class="anchor" id="autotoc_md139"></a>
Examples of usage</h2>
<h3><a class="anchor" id="autotoc_md140"></a>
Normal operation</h3>
<p >Under normal circumstances, all the configurations for the ES ADCS should be preloaded in their respective NVM entries.</p>
<p >The recommended sequence of operation is described below:</p>
<ol type="1">
<li>Check operational mode using <b><a class="el" href="es__adcs_8h.html#aac19a206791d70260633915d3c456ee7" title="Get the ADCS HSM mode.">es_adcs_get_op_mode()</a></b> (in OBC SDK) or <b>OBC_ES_ADCS_GET_OP_MODE</b> (in FIDL). Expected result is <code>IDLE(3)</code>.</li>
<li>Check configured estimators using <b><a class="el" href="es__adcs_8h.html#a86b963511e31d8f3889548b7123c1388" title="Get the type of estimators used by the ADCS.">es_adcs_get_estimator(es_adcs_estimator_t *currentEstimators)</a></b> (in OBC SDK) or <b>OBC_ES_ADCS_GET_ESTIMATORS</b> (in FIDL).</li>
<li>Check configured controller using <a class="el" href="es__adcs_8h.html#ad3c922f054983c069bbc34aca229a921" title="Get the type of controller used by the ADCS.">es_adcs_get_controller()</a> (in OBC SDK) or <b>OBC_ES_ADCS_GET_CONTROLLER</b> (in FIDL).</li>
<li>Check the appropriate configuration for the chosen controller (example: <a class="el" href="es__adcs_8h.html#a8c860c26536e7b8b82ee84dccdbe3876" title="Get the type of bdot controller configuration used by the ADCS.">es_adcs_get_controller_bdot_config()</a> (in OBC SDK) or <b>OBC_ES_ADCS_GET_CONTROLLER_BDOT_CONFIG</b> (in FIDL)).</li>
<li>Check if the expected magnetometer is being used by the ES ADCS with <a class="el" href="es__adcs_8h.html#a9e8fc00f6effee2fe2e5f7627b57b8f3" title="Get the used magnetometer by the ADCS.">es_adcs_get_used_magnetometer()</a> (in OBC SDK) or <b>OBC_ES_ADCS_GET_MAGNETOMETER</b> (in FIDL).</li>
<li>After making sure all results from the previous steps satisfy the user - enable the ES ADCS by calling <b><a class="el" href="es__adcs_8h.html#add7be486478a0158ca75cbaa0c6710f9" title="Set the ADCS HSM mode.">es_adcs_set_op_mode(uint8_t desiredOpMode)</a></b> (in OBC SDK) or <b>OBC_ES_ADCS_SET_OP_MODE</b> (in FIDL) with the <code>RUN(1)</code> state as a parameter.</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>Steps 2-5 can be combined by calling the function <b><a class="el" href="es__adcs_8h.html#a28a7726b333f554a5bb06a60782acf51" title="Get the current ADCS main configuration.">es_adcs_get_config()</a></b> (in OBC SDK) or <b>OBC_ES_ADCS_GET_ADCS_CONFIG</b> (in FIDL).</dd></dl>
<p>Following the successful execution of step 6, it is recommended to call <b><a class="el" href="es__adcs_8h.html#a1a2bc3b8d716c399d67a0cf26dcb9cad" title="Get the ADCS module current status.">es_adcs_get_status()</a></b> (in OBC SDK) or <b>OBC_ES_ADCS_GET_STATUS</b> (in FIDL) to confirm that the ES ADCS has not experienced any errors with estimation or control and the operational mode has switched to <code>RUN(1)</code>.</p>
<p >The ES ADCS configuration can be saved to NVM when the user has decided that it provides good performance. To do so, use <b><a class="el" href="es__adcs_8h.html#a74f342aec3e5ea41e02197815e6b4c15" title="Save the current ADCS main configuration to NVM.">es_adcs_save_config_to_NVM()</a></b> (in OBC SDK) or <b>OBC_ES_ADCS_SAVE_ADCS_CONFIG</b> (in FIDL).</p>
<p >In case the configuration is not satisfactory, the user can revert to the last saved NVM configuration using <b><a class="el" href="es__adcs_8h.html#a742a3018c4a65352cd7a84addbd7e0e1" title="Load the current ADCS main configuration from NVM.">es_adcs_load_config_from_NVM()</a></b> (in OBC SDK) or <b>OBC_ES_ADCS_LOAD_ADCS_CONFIG</b> (in FIDL).</p>
<h3><a class="anchor" id="autotoc_md141"></a>
Reconfiguring the coordinate frames</h3>
<p >There exists a possibility that the hardware on the satellite has been mounted differently than what was initially expected. In such cases, the rotation (transformation) matrices must be changed accordingly.</p>
<p >When using FIDL, the functions are found inside the file <code>&lt;OBC SDK&gt;/espf/core/fidl/obc/fp/OBC_ES_COORDSYS.fidl</code>.</p>
<p >Though it is possible to change the rotation matrices during active operation of the ES ADCS, it is not recommended. As such, the following sequence assumes that the ES ADCS is in <code>IDLE(3)</code> mode.</p>
<dl class="section note"><dt>Note</dt><dd>The sequence provides an example for changing the magnetometer rotation matrix - other sensors/actuators follow an identical sequence with their own functions.</dd></dl>
<ol type="1">
<li>Call <b><a class="el" href="es__coordsys_8c.html#a34910be1d8531644e098448d67ad7f9e" title="Retrieve the rotation matrix for magnetometer frame transformation.">coordSys_getMagMatrix(es_coordsys_mag_frame_t *activeMagFrame)</a></b> (in OBC SDK) or <b>OBC_ES_COORDSYS_GET_MAGNETOMETER_FRAME</b> (in FIDL). Evaluate that the coordinate frame is indeed incorrect.</li>
<li>Call <b><a class="el" href="es__coordsys_8c.html#a2b5fbaedf46d74c7b4601f5c4e9a4696" title="Change the rotation matrix for magnetometer frame transformation.">coordSys_setMagMatrix(const es_coordsys_mag_frame_t *newMagFrame)</a></b> (in OBC SDK) or <b>OBC_ES_COORDSYS_SET_MAGNETOMETER_FRAME</b> (in FIDL).</li>
<li>Once the frame is set, use <b><a class="el" href="es__coordsys_8h.html#a3ff52c7348c8a7d05d7971b3ee2810c7" title="Save the current coordinate frames configuration to NVM.">coordSys_save_config_to_NVM()</a></b> (in OBC SDK) or <b>OBC_ES_COORDSYS_SAVE_COORDSYS_CONFIG</b> (in FIDL) to transfer the active configuration to NVM.</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>As with the ES ADCS config, the coordsys library also provides the capability to revert to last saved NVM configuration using <b><a class="el" href="es__coordsys_8h.html#a179bee47aadd2af0d591493aa8d7b69b" title="Load the current coordinate frames configuration from NVM.">coordSys_load_config_from_NVM()</a></b> (in OBC SDK) or <b>OBC_ES_COORDSYS_LOAD_COORDSYS_CONFIG</b> (in FIDL). </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>During step 2, it is possible to define a rotation matrix with more than one sensor/actuator per axis, thus making the rotation matrix invalid. It is important to take great care when configuring new rotation matrices. </dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by Doxygen 1.9.4 </li>
  </ul>
</div>
</body>
</html>
