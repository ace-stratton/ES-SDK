<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EnduroSat On-Board Computer SDK Documentation: /builds/sw-platform-es/modules/on-boardcomputer/stm32f/obc-stdpf-hw-1.x/espf/core/services/sys_time/src/sys_time.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
$darkmode
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="../../index.html"><img alt="Logo" src="EnduroSat_horLogo_symbol@2x-min.png"/></a></td>
  <td id="projectalign">
   <div id="projectname">EnduroSat On-Board Computer SDK Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('sys__time_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sys_time.c File Reference<div class="ingroups"><a class="el" href="group___services.html">Services</a> &raquo; <a class="el" href="group__services__sys__time.html">Time</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Main implementation of the Time service.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="sys__time_8h_source.html">sys_time.h</a>&quot;</code><br />
<code>#include &quot;stm32h7xx_hal.h&quot;</code><br />
<code>#include &quot;stm32h7xx_hal_rtc.h&quot;</code><br />
<code>#include &quot;stm32h7xx_ll_rtc.h&quot;</code><br />
<code>#include &quot;stm32h7xx_ll_rcc.h&quot;</code><br />
<code>#include &quot;cmsis_os2.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_task_monitor_8h_source.html">TaskMonitor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trace_8h_source.html">trace.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="drv__led_8h_source.html">drv_led.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nvm_8h_source.html">nvm.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="assertions_8h_source.html">assertions.h</a>&quot;</code><br />
</div>
<p><a href="sys__time_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aea957964caa63cbaf881b6cbdcb920d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#aea957964caa63cbaf881b6cbdcb920d3">FS_YEAR_OFFSET</a>&#160;&#160;&#160;(2000U)</td></tr>
<tr class="separator:aea957964caa63cbaf881b6cbdcb920d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacbf44aff1322613776ac924b4f51882"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#aacbf44aff1322613776ac924b4f51882">FS_FORMAT</a>&#160;&#160;&#160;(RTC_FORMAT_BIN)</td></tr>
<tr class="separator:aacbf44aff1322613776ac924b4f51882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f6dca37099baa5f7b021894182f81f4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a7f6dca37099baa5f7b021894182f81f4">FS_LOCK_TIME</a>&#160;&#160;&#160;(osWaitForever)</td></tr>
<tr class="separator:a7f6dca37099baa5f7b021894182f81f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08802f5145c0be38efae3c78c1c8734c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a08802f5145c0be38efae3c78c1c8734c">MAX_LOOP_RSF</a>&#160;&#160;&#160;(1000)</td></tr>
<tr class="separator:a08802f5145c0be38efae3c78c1c8734c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b0de01e883b4ca5798828d0ca559d8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a85b0de01e883b4ca5798828d0ca559d8">MAX_LOOP_SHPF</a>&#160;&#160;&#160;(1000)</td></tr>
<tr class="separator:a85b0de01e883b4ca5798828d0ca559d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae46c9c2074abf73dca60c2c892dff638"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#ae46c9c2074abf73dca60c2c892dff638">MAX_PREDIV_A_VALUE</a>&#160;&#160;&#160;(0x7F)    /* 127 */</td></tr>
<tr class="separator:ae46c9c2074abf73dca60c2c892dff638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad105eea2a855811c582477480d6b1d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#adad105eea2a855811c582477480d6b1d">MAX_PREDIV_S_VALUE</a>&#160;&#160;&#160;(0x7FFF)  /* 32767 */</td></tr>
<tr class="separator:adad105eea2a855811c582477480d6b1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02958ac0ccbaa0abdc19391525b5ac9e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a02958ac0ccbaa0abdc19391525b5ac9e">CONFIG_PREDIV_A_VALUE</a>&#160;&#160;&#160;(0)</td></tr>
<tr class="separator:a02958ac0ccbaa0abdc19391525b5ac9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d7da84862508b0d53dde6772ffa281"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#af0d7da84862508b0d53dde6772ffa281">CONFIG_PREDIV_S_VALUE</a>&#160;&#160;&#160;(0x7FFF)  /* 32767 */</td></tr>
<tr class="separator:af0d7da84862508b0d53dde6772ffa281"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab1fdac4534b3617da4a6f30dacf0b050"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#ab1fdac4534b3617da4a6f30dacf0b050">sys_time_retrieve_rtc_calib_settings</a> (<a class="el" href="structsys__time__rtc__calib__settings__t.html">sys_time_rtc_calib_settings_t</a> *const p_calib_settings)</td></tr>
<tr class="memdesc:ab1fdac4534b3617da4a6f30dacf0b050"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the stored NVM settings for the RTC calibration.  <a href="sys__time_8c.html#ab1fdac4534b3617da4a6f30dacf0b050">More...</a><br /></td></tr>
<tr class="separator:ab1fdac4534b3617da4a6f30dacf0b050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa219e18cea7f95ff9f40ade43e6093d6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#aa219e18cea7f95ff9f40ade43e6093d6">sys_time_update_rtc_calib_settings</a> (const <a class="el" href="structsys__time__rtc__calib__settings__t.html">sys_time_rtc_calib_settings_t</a> *const p_calib_settings)</td></tr>
<tr class="memdesc:aa219e18cea7f95ff9f40ade43e6093d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the stored NVM settings for the RTC calibration.  <a href="sys__time_8c.html#aa219e18cea7f95ff9f40ade43e6093d6">More...</a><br /></td></tr>
<tr class="separator:aa219e18cea7f95ff9f40ade43e6093d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdec0897ecdb902092e1fdbf1ed8b622"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#afdec0897ecdb902092e1fdbf1ed8b622">sys_time_apply_rtc_calib</a> (void)</td></tr>
<tr class="memdesc:afdec0897ecdb902092e1fdbf1ed8b622"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the configured RTC calibration values to the RTC peripheral.  <a href="sys__time_8c.html#afdec0897ecdb902092e1fdbf1ed8b622">More...</a><br /></td></tr>
<tr class="separator:afdec0897ecdb902092e1fdbf1ed8b622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b75ea829302704f400473a795337d0d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a2b75ea829302704f400473a795337d0d">sys_time_init</a> (void)</td></tr>
<tr class="memdesc:a2b75ea829302704f400473a795337d0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the time service (uses RTC if applicable)  <a href="sys__time_8c.html#a2b75ea829302704f400473a795337d0d">More...</a><br /></td></tr>
<tr class="separator:a2b75ea829302704f400473a795337d0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8f7f18e324fd29be51d49635ca600df"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#ad8f7f18e324fd29be51d49635ca600df">sys_time_en_calib_out</a> (TIME_cal_freq_t mode)</td></tr>
<tr class="memdesc:ad8f7f18e324fd29be51d49635ca600df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activates the RTC calibration output with a predefined frequency of 1Hz (if applicable).  <a href="sys__time_8c.html#ad8f7f18e324fd29be51d49635ca600df">More...</a><br /></td></tr>
<tr class="separator:ad8f7f18e324fd29be51d49635ca600df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e0db442500d79bf0b65237f2bbac9f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#ae2e0db442500d79bf0b65237f2bbac9f">sys_time_get</a> (<a class="el" href="structdatetime__time__t.html">sys_time_t</a> *const p_time)</td></tr>
<tr class="memdesc:ae2e0db442500d79bf0b65237f2bbac9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current time.  <a href="sys__time_8c.html#ae2e0db442500d79bf0b65237f2bbac9f">More...</a><br /></td></tr>
<tr class="separator:ae2e0db442500d79bf0b65237f2bbac9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0692498a4ca5fbddf112dbf7e6f457b5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a0692498a4ca5fbddf112dbf7e6f457b5">sys_time_set</a> (const <a class="el" href="structdatetime__time__t.html">sys_time_t</a> *const p_new_time)</td></tr>
<tr class="memdesc:a0692498a4ca5fbddf112dbf7e6f457b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the current time.  <a href="sys__time_8c.html#a0692498a4ca5fbddf112dbf7e6f457b5">More...</a><br /></td></tr>
<tr class="separator:a0692498a4ca5fbddf112dbf7e6f457b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aef211b2c7126f54e69313aaf5b295b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a7aef211b2c7126f54e69313aaf5b295b">sys_time_get_date</a> (<a class="el" href="structdatetime__date__t.html">sys_date_t</a> *const p_date)</td></tr>
<tr class="memdesc:a7aef211b2c7126f54e69313aaf5b295b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current date.  <a href="sys__time_8c.html#a7aef211b2c7126f54e69313aaf5b295b">More...</a><br /></td></tr>
<tr class="separator:a7aef211b2c7126f54e69313aaf5b295b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a610a14645390d189751ce99384a4859e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a610a14645390d189751ce99384a4859e">sys_time_set_date</a> (const <a class="el" href="structdatetime__date__t.html">sys_date_t</a> *const p_new_date)</td></tr>
<tr class="memdesc:a610a14645390d189751ce99384a4859e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the current date.  <a href="sys__time_8c.html#a610a14645390d189751ce99384a4859e">More...</a><br /></td></tr>
<tr class="separator:a610a14645390d189751ce99384a4859e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a970f519a18a94805fa0c3286f1e4983d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a970f519a18a94805fa0c3286f1e4983d">sys_time_get_stamp</a> (<a class="el" href="structdatetime__date__t.html">sys_date_t</a> *const p_date, <a class="el" href="structdatetime__time__t.html">sys_time_t</a> *const p_time)</td></tr>
<tr class="memdesc:a970f519a18a94805fa0c3286f1e4983d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current date and time with ~30 microsecond precision.  <a href="sys__time_8c.html#a970f519a18a94805fa0c3286f1e4983d">More...</a><br /></td></tr>
<tr class="separator:a970f519a18a94805fa0c3286f1e4983d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2611d571fe6158392d75b2fc8b97b9bf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a2611d571fe6158392d75b2fc8b97b9bf">sys_time_set_stamp</a> (const <a class="el" href="structdatetime__date__t.html">sys_date_t</a> *const p_date, const <a class="el" href="structdatetime__time__t.html">sys_time_t</a> *const p_time, uint32_t timeout)</td></tr>
<tr class="memdesc:a2611d571fe6158392d75b2fc8b97b9bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the current date and time with up to ~30 microseconds precision.  <a href="sys__time_8c.html#a2611d571fe6158392d75b2fc8b97b9bf">More...</a><br /></td></tr>
<tr class="separator:a2611d571fe6158392d75b2fc8b97b9bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bea29fbe76cd83f64624583820f4418"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a0bea29fbe76cd83f64624583820f4418">optimize</a> (0)</td></tr>
<tr class="memdesc:a0bea29fbe76cd83f64624583820f4418"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for a number of loops for the RSF to get set by hardware. See explanation above declaration of MAX_LOOP_RSF. See RM0433 46.3.8, 46.3.9 and 46.6.4(ISR). Optimizations are turned off to avoid any compiler optimizations.  <a href="sys__time_8c.html#a0bea29fbe76cd83f64624583820f4418">More...</a><br /></td></tr>
<tr class="separator:a0bea29fbe76cd83f64624583820f4418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee6eddaa309c8c9829f1ca794d8f99c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#aee6eddaa309c8c9829f1ca794d8f99c5">HAL_RTC_MspInit</a> (RTC_HandleTypeDef *hrtc)</td></tr>
<tr class="memdesc:aee6eddaa309c8c9829f1ca794d8f99c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">RTC hardware init. Overrides HAL function.  <a href="sys__time_8c.html#aee6eddaa309c8c9829f1ca794d8f99c5">More...</a><br /></td></tr>
<tr class="separator:aee6eddaa309c8c9829f1ca794d8f99c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8767bc3a4d472d39a688090ab10ba6ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a8767bc3a4d472d39a688090ab10ba6ce">HAL_RTC_MspDeInit</a> (RTC_HandleTypeDef *hrtc)</td></tr>
<tr class="memdesc:a8767bc3a4d472d39a688090ab10ba6ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">RTC hardware deinit. Overrides HAL function.  <a href="sys__time_8c.html#a8767bc3a4d472d39a688090ab10ba6ce">More...</a><br /></td></tr>
<tr class="separator:a8767bc3a4d472d39a688090ab10ba6ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a404b94323c309533ec63483a1eaaae16"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__time_8c.html#a404b94323c309533ec63483a1eaaae16">sys_time_get_rtc_clock_source</a> (<a class="el" href="structsys__time__rtc__clock__info__t.html">sys_time_rtc_clock_info_t</a> *info)</td></tr>
<tr class="memdesc:a404b94323c309533ec63483a1eaaae16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current oscillator source for the RTC clock.  <a href="sys__time_8c.html#a404b94323c309533ec63483a1eaaae16">More...</a><br /></td></tr>
<tr class="separator:a404b94323c309533ec63483a1eaaae16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Main implementation of the Time service. </p>

<p class="definition">Definition in file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aea957964caa63cbaf881b6cbdcb920d3" name="aea957964caa63cbaf881b6cbdcb920d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea957964caa63cbaf881b6cbdcb920d3">&#9670;&nbsp;</a></span>FS_YEAR_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_YEAR_OFFSET&#160;&#160;&#160;(2000U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00030">30</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="aacbf44aff1322613776ac924b4f51882" name="aacbf44aff1322613776ac924b4f51882"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacbf44aff1322613776ac924b4f51882">&#9670;&nbsp;</a></span>FS_FORMAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_FORMAT&#160;&#160;&#160;(RTC_FORMAT_BIN)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00031">31</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a7f6dca37099baa5f7b021894182f81f4" name="a7f6dca37099baa5f7b021894182f81f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f6dca37099baa5f7b021894182f81f4">&#9670;&nbsp;</a></span>FS_LOCK_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_LOCK_TIME&#160;&#160;&#160;(osWaitForever)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00032">32</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a08802f5145c0be38efae3c78c1c8734c" name="a08802f5145c0be38efae3c78c1c8734c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08802f5145c0be38efae3c78c1c8734c">&#9670;&nbsp;</a></span>MAX_LOOP_RSF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_LOOP_RSF&#160;&#160;&#160;(1000)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The value of 1000 for both MAX_LOOP_RSF and MAX_LOOP_SHPF have been chosen empirically. The worst case scenario according to documentation(RM0433 46.3.8) is 4 RTCCLK cycles, where the usual RTCCLK frequency is 32678Hz, so 1 cycle is ~1/32768s, ie ~30.5us. The HAL_GetTick() granularity is 1 millisecond which is way too rough for our needs. The timeout for the loops is longest right after update (call to <a class="el" href="sys__time_8c.html#a2611d571fe6158392d75b2fc8b97b9bf" title="Sets the current date and time with up to ~30 microseconds precision.">sys_time_set_stamp()</a>). An empirical test of 100000 (hundred thousand) repetitions has been made and the count of loops required for RSF to clear right after a call to <a class="el" href="sys__time_8c.html#a2611d571fe6158392d75b2fc8b97b9bf" title="Sets the current date and time with up to ~30 microseconds precision.">sys_time_set_stamp()</a> mostly varies between 300 and 720, but most of the times it is around 700. Not once in the test have the loops been more than 800. Considering that the timeout should not be longer according documentation, a limit of 1000 should be more than enough. The same test has been made for SHPF and its value is around 600, but otherwise the case is the same. IMPORTANT! This value should be adjusted if a different frequency than 32768Hz is used for RTCCLK or the cpu core frequency is changed as this would affect the looping speed. </p>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00050">50</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a85b0de01e883b4ca5798828d0ca559d8" name="a85b0de01e883b4ca5798828d0ca559d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b0de01e883b4ca5798828d0ca559d8">&#9670;&nbsp;</a></span>MAX_LOOP_SHPF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_LOOP_SHPF&#160;&#160;&#160;(1000)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00051">51</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="ae46c9c2074abf73dca60c2c892dff638" name="ae46c9c2074abf73dca60c2c892dff638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae46c9c2074abf73dca60c2c892dff638">&#9670;&nbsp;</a></span>MAX_PREDIV_A_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PREDIV_A_VALUE&#160;&#160;&#160;(0x7F)    /* 127 */</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >In STM32H753 the maximum value for the Asynchronous Presalar (PREDIV_A) is the maximum of a 7-bit binary value. In STM32H753 the maximum value for the Synchronous Presalar (PREDIV_S) is the maximum of a 15-bit binary value. With the current hardware settings the RTCCLK uses LSE as source with frequency is 32768Hz. In order to have correct counting, (1+PREDIV_A)*(1+PREDIV_S) must equal RTCCLK, ie 32768 with current configuration. See RM0433 46.3.4 and 46.6.5 </p>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00060">60</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="adad105eea2a855811c582477480d6b1d" name="adad105eea2a855811c582477480d6b1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adad105eea2a855811c582477480d6b1d">&#9670;&nbsp;</a></span>MAX_PREDIV_S_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PREDIV_S_VALUE&#160;&#160;&#160;(0x7FFF)  /* 32767 */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00061">61</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a02958ac0ccbaa0abdc19391525b5ac9e" name="a02958ac0ccbaa0abdc19391525b5ac9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02958ac0ccbaa0abdc19391525b5ac9e">&#9670;&nbsp;</a></span>CONFIG_PREDIV_A_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_PREDIV_A_VALUE&#160;&#160;&#160;(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00062">62</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="af0d7da84862508b0d53dde6772ffa281" name="af0d7da84862508b0d53dde6772ffa281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0d7da84862508b0d53dde6772ffa281">&#9670;&nbsp;</a></span>CONFIG_PREDIV_S_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_PREDIV_S_VALUE&#160;&#160;&#160;(0x7FFF)  /* 32767 */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00063">63</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab1fdac4534b3617da4a6f30dacf0b050" name="ab1fdac4534b3617da4a6f30dacf0b050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1fdac4534b3617da4a6f30dacf0b050">&#9670;&nbsp;</a></span>sys_time_retrieve_rtc_calib_settings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_retrieve_rtc_calib_settings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsys__time__rtc__calib__settings__t.html">sys_time_rtc_calib_settings_t</a> *const&#160;</td>
          <td class="paramname"><em>p_calib_settings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the stored NVM settings for the RTC calibration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_calib_settings</td><td>RTC calibration settings to update from NVM </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00091">91</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="aa219e18cea7f95ff9f40ade43e6093d6" name="aa219e18cea7f95ff9f40ade43e6093d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa219e18cea7f95ff9f40ade43e6093d6">&#9670;&nbsp;</a></span>sys_time_update_rtc_calib_settings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_update_rtc_calib_settings </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsys__time__rtc__calib__settings__t.html">sys_time_rtc_calib_settings_t</a> *const&#160;</td>
          <td class="paramname"><em>p_calib_settings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the stored NVM settings for the RTC calibration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_calib_settings</td><td>RTC calibration settings to update in NVM </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00110">110</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="afdec0897ecdb902092e1fdbf1ed8b622" name="afdec0897ecdb902092e1fdbf1ed8b622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdec0897ecdb902092e1fdbf1ed8b622">&#9670;&nbsp;</a></span>sys_time_apply_rtc_calib()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_apply_rtc_calib </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applies the configured RTC calibration values to the RTC peripheral. </p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00131">131</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a2b75ea829302704f400473a795337d0d" name="a2b75ea829302704f400473a795337d0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b75ea829302704f400473a795337d0d">&#9670;&nbsp;</a></span>sys_time_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the time service (uses RTC if applicable) </p>
<p >Initialize sys_time module. Serious consideration should be taken when changing any of the code in this function. Read RM0433 8. and 46. Read STM32H753xI Errata sheet. </p>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00169">169</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="ad8f7f18e324fd29be51d49635ca600df" name="ad8f7f18e324fd29be51d49635ca600df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8f7f18e324fd29be51d49635ca600df">&#9670;&nbsp;</a></span>sys_time_en_calib_out()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_en_calib_out </td>
          <td>(</td>
          <td class="paramtype">TIME_cal_freq_t&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Activates the RTC calibration output with a predefined frequency of 1Hz (if applicable). </p>
<dl class="section note"><dt>Note</dt><dd>Has effect only once throughout the program life cycle. Check the MCU reference for information on which pin the calibration signal will be output. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Pin output frequency TIME_cal_freq_t </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00243">243</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="ae2e0db442500d79bf0b65237f2bbac9f" name="ae2e0db442500d79bf0b65237f2bbac9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2e0db442500d79bf0b65237f2bbac9f">&#9670;&nbsp;</a></span>sys_time_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdatetime__time__t.html">sys_time_t</a> *const&#160;</td>
          <td class="paramname"><em>p_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current time. </p>
<dl class="section note"><dt>Note</dt><dd>The the <code>.us</code> value in p_time should be taken with a grain of salt as the finest granularity achieved on the current hardware is ~30 microseconds </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">p_time</td><td>Current time </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00291">291</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a0692498a4ca5fbddf112dbf7e6f457b5" name="a0692498a4ca5fbddf112dbf7e6f457b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0692498a4ca5fbddf112dbf7e6f457b5">&#9670;&nbsp;</a></span>sys_time_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_set </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdatetime__time__t.html">sys_time_t</a> *const&#160;</td>
          <td class="paramname"><em>p_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the current time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_time</td><td>New time specified by caller </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00298">298</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a7aef211b2c7126f54e69313aaf5b295b" name="a7aef211b2c7126f54e69313aaf5b295b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7aef211b2c7126f54e69313aaf5b295b">&#9670;&nbsp;</a></span>sys_time_get_date()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_get_date </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdatetime__date__t.html">sys_date_t</a> *const&#160;</td>
          <td class="paramname"><em>p_date</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current date. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">date</td><td>Current date </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00312">312</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a610a14645390d189751ce99384a4859e" name="a610a14645390d189751ce99384a4859e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a610a14645390d189751ce99384a4859e">&#9670;&nbsp;</a></span>sys_time_set_date()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_set_date </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdatetime__date__t.html">sys_date_t</a> *const&#160;</td>
          <td class="paramname"><em>p_date</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the current date. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">date</td><td>New date specified by caller </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00319">319</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a970f519a18a94805fa0c3286f1e4983d" name="a970f519a18a94805fa0c3286f1e4983d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a970f519a18a94805fa0c3286f1e4983d">&#9670;&nbsp;</a></span>sys_time_get_stamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_get_stamp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdatetime__date__t.html">sys_date_t</a> *const&#160;</td>
          <td class="paramname"><em>p_date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdatetime__time__t.html">sys_time_t</a> *const&#160;</td>
          <td class="paramname"><em>p_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current date and time with ~30 microsecond precision. </p>
<dl class="section note"><dt>Note</dt><dd>The the <code>.us</code> value in p_time should be taken with a grain of salt as the finest granularity achieved on the current hardware is ~30 microseconds </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">p_date</td><td>Pointer to sys_date_t structure to be filled with the current date </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_time</td><td>Pointer to sys_time_t structure to be filled with the current time </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> on error (may be due to timeout) On error, structure values are unchanged </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00426">426</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a2611d571fe6158392d75b2fc8b97b9bf" name="a2611d571fe6158392d75b2fc8b97b9bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2611d571fe6158392d75b2fc8b97b9bf">&#9670;&nbsp;</a></span>sys_time_set_stamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_set_stamp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdatetime__date__t.html">sys_date_t</a> *const&#160;</td>
          <td class="paramname"><em>p_date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdatetime__time__t.html">sys_time_t</a> *const&#160;</td>
          <td class="paramname"><em>p_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the current date and time with up to ~30 microseconds precision. </p>
<dl class="section note"><dt>Note</dt><dd>The the <code>.us</code> value in p_time should be taken with a grain of salt as the finest granularity achieved on the current hardware is ~30 microseconds </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_date</td><td>Pointer to sys_date_t structure with the new date to be set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_time</td><td>Pointer to sys_time_t structure with the new time to be set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>mutex lock timeout in ms. 0 - exit with false immediately resource is not available osWaitForever - wait forever, osWaitForever is a constant defined in &lt;cmsis_os2.h&gt; </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> on error (may be due to timeout) On error, current datetime is not changed </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00444">444</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a0bea29fbe76cd83f64624583820f4418" name="a0bea29fbe76cd83f64624583820f4418"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bea29fbe76cd83f64624583820f4418">&#9670;&nbsp;</a></span>optimize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">optimize </td>
          <td>(</td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for a number of loops for the RSF to get set by hardware. See explanation above declaration of MAX_LOOP_RSF. See RM0433 46.3.8, 46.3.9 and 46.6.4(ISR). Optimizations are turned off to avoid any compiler optimizations. </p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00509">509</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="aee6eddaa309c8c9829f1ca794d8f99c5" name="aee6eddaa309c8c9829f1ca794d8f99c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee6eddaa309c8c9829f1ca794d8f99c5">&#9670;&nbsp;</a></span>HAL_RTC_MspInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_RTC_MspInit </td>
          <td>(</td>
          <td class="paramtype">RTC_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>hrtc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RTC hardware init. Overrides HAL function. </p>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00596">596</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a8767bc3a4d472d39a688090ab10ba6ce" name="a8767bc3a4d472d39a688090ab10ba6ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8767bc3a4d472d39a688090ab10ba6ce">&#9670;&nbsp;</a></span>HAL_RTC_MspDeInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_RTC_MspDeInit </td>
          <td>(</td>
          <td class="paramtype">RTC_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>hrtc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RTC hardware deinit. Overrides HAL function. </p>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00652">652</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
<a id="a404b94323c309533ec63483a1eaaae16" name="a404b94323c309533ec63483a1eaaae16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a404b94323c309533ec63483a1eaaae16">&#9670;&nbsp;</a></span>sys_time_get_rtc_clock_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_time_get_rtc_clock_source </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsys__time__rtc__clock__info__t.html">sys_time_rtc_clock_info_t</a> *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current oscillator source for the RTC clock. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">info</td><td>Pointer to a structure to be filled with the info. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="sys__time_8c_source.html#l00660">660</a> of file <a class="el" href="sys__time_8c_source.html">sys_time.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e2c83a6801e015e427e1c55223a130e1.html">espf</a></li><li class="navelem"><a class="el" href="dir_99f3dafb56e7a0be84da390df3a0ec4d.html">core</a></li><li class="navelem"><a class="el" href="dir_5013bdea625176bf2964ef0fdf345617.html">services</a></li><li class="navelem"><a class="el" href="dir_315e263639d0919c18ef69e9cd78a00c.html">sys_time</a></li><li class="navelem"><a class="el" href="dir_ec2b48e1d622c81f41123698b9aae857.html">src</a></li><li class="navelem"><a class="el" href="sys__time_8c.html">sys_time.c</a></li>
    <li class="footer">Generated by Doxygen 1.9.4 </li>
  </ul>
</div>
</body>
</html>
