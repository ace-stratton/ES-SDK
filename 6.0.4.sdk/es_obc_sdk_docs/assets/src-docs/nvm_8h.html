<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EnduroSat On-Board Computer SDK Documentation: /builds/sw-platform-es/modules/on-boardcomputer/stm32f/obc-stdpf-hw-1.x/espf/core/services/nvm/inc/nvm.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
$darkmode
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="../../index.html"><img alt="Logo" src="EnduroSat_horLogo_symbol@2x-min.png"/></a></td>
  <td id="projectalign">
   <div id="projectname">EnduroSat On-Board Computer SDK Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('nvm_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">nvm.h File Reference<div class="ingroups"><a class="el" href="group___services.html">Services</a> &raquo; <a class="el" href="group___nvm.html">Nvm</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>NVM service public interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="es__cdef_8h_source.html">es_cdef.h</a>&quot;</code><br />
<code>#include &quot;nvm/inc/nvm_data_types.h&quot;</code><br />
<code>#include &quot;nvm/inc/nvm_block_ids.h&quot;</code><br />
</div>
<p><a href="nvm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a479bf1b27bedcc0536ce73a78debcf38"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvm_8h.html#a479bf1b27bedcc0536ce73a78debcf38">NVMSTORE_STANDARD</a>&#160;&#160;&#160;(false)</td></tr>
<tr class="memdesc:a479bf1b27bedcc0536ce73a78debcf38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Non-volatile Memory storage service interface.  <a href="nvm_8h.html#a479bf1b27bedcc0536ce73a78debcf38">More...</a><br /></td></tr>
<tr class="separator:a479bf1b27bedcc0536ce73a78debcf38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96411b91e4f696011d6ba156bf357765"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvm_8h.html#a96411b91e4f696011d6ba156bf357765">NVMSTORE_FORCEDEFAULTS</a>&#160;&#160;&#160;(true)</td></tr>
<tr class="memdesc:a96411b91e4f696011d6ba156bf357765"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specifies that all blocks are overwritten with default values.  <a href="nvm_8h.html#a96411b91e4f696011d6ba156bf357765">More...</a><br /></td></tr>
<tr class="separator:a96411b91e4f696011d6ba156bf357765"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7112e851e53e0fac8a012739fff8bf2b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvm_8h.html#a7112e851e53e0fac8a012739fff8bf2b">NVMSETBLOCK_STORE_POSTPONED</a>&#160;&#160;&#160;(false)</td></tr>
<tr class="memdesc:a7112e851e53e0fac8a012739fff8bf2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that the block update in NVM can be postponed until the next invocation of the Nvm service regular task function.  <a href="nvm_8h.html#a7112e851e53e0fac8a012739fff8bf2b">More...</a><br /></td></tr>
<tr class="separator:a7112e851e53e0fac8a012739fff8bf2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa70467405e3d41fb7f852235dd77da30"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvm_8h.html#aa70467405e3d41fb7f852235dd77da30">NVMSETBLOCK_STORE_IMMEDIATELY</a>&#160;&#160;&#160;(true)</td></tr>
<tr class="memdesc:aa70467405e3d41fb7f852235dd77da30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that the block update in NVM shall take place immediately without waiting for the regular task function to be scheduled.  <a href="nvm_8h.html#aa70467405e3d41fb7f852235dd77da30">More...</a><br /></td></tr>
<tr class="separator:aa70467405e3d41fb7f852235dd77da30"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abba0b3641f1ceea96945631aa0e621ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvm_8h.html#abba0b3641f1ceea96945631aa0e621ef">Nvm_Init</a> (void)</td></tr>
<tr class="memdesc:abba0b3641f1ceea96945631aa0e621ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the Nvm service for use.  <a href="nvm_8h.html#abba0b3641f1ceea96945631aa0e621ef">More...</a><br /></td></tr>
<tr class="separator:abba0b3641f1ceea96945631aa0e621ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb0bcc6b000d26e418dc0b334d1724ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvm_8h.html#abb0bcc6b000d26e418dc0b334d1724ac">Nvm_Load</a> (void)</td></tr>
<tr class="memdesc:abb0bcc6b000d26e418dc0b334d1724ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the NVM data from the persistent storage to the RAM mirror.  <a href="nvm_8h.html#abb0bcc6b000d26e418dc0b334d1724ac">More...</a><br /></td></tr>
<tr class="separator:abb0bcc6b000d26e418dc0b334d1724ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9189f9ead27b3c1c558c5c7ffe6b583"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvm_8h.html#ad9189f9ead27b3c1c558c5c7ffe6b583">Nvm_GetBlockById</a> (uint16_t u16BlockId, void *const pBlockBuffer)</td></tr>
<tr class="memdesc:ad9189f9ead27b3c1c558c5c7ffe6b583"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes a copy of the stored data for a given NVM block to a user-specified buffer.  <a href="nvm_8h.html#ad9189f9ead27b3c1c558c5c7ffe6b583">More...</a><br /></td></tr>
<tr class="separator:ad9189f9ead27b3c1c558c5c7ffe6b583"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ab2eb6f64098ab587e2664b7c303f63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvm_8h.html#a7ab2eb6f64098ab587e2664b7c303f63">Nvm_SetBlockById</a> (uint16_t u16BlockId, void *const pBlockBuffer, const bool bStoreImmediately)</td></tr>
<tr class="memdesc:a7ab2eb6f64098ab587e2664b7c303f63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the NVM block data to the persistent storage.  <a href="nvm_8h.html#a7ab2eb6f64098ab587e2664b7c303f63">More...</a><br /></td></tr>
<tr class="separator:a7ab2eb6f64098ab587e2664b7c303f63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a646d03a772428cd8d6ec93db8e17f596"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvm_8h.html#a646d03a772428cd8d6ec93db8e17f596">Nvm_Store</a> (const bool bForceDefaults)</td></tr>
<tr class="memdesc:a646d03a772428cd8d6ec93db8e17f596"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates all NVM blocks to the persistent storage using the current state of the RAM mirror.  <a href="nvm_8h.html#a646d03a772428cd8d6ec93db8e17f596">More...</a><br /></td></tr>
<tr class="separator:a646d03a772428cd8d6ec93db8e17f596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af567ce645d08f7ce9caa18091344ff23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvm_8h.html#af567ce645d08f7ce9caa18091344ff23">Nvm_RestoreBlockDefaults</a> (const uint16_t u16BlockId)</td></tr>
<tr class="memdesc:af567ce645d08f7ce9caa18091344ff23"><td class="mdescLeft">&#160;</td><td class="mdescRight">The functions overwrites the persistent storage for a given block with the ROM default values.  <a href="nvm_8h.html#af567ce645d08f7ce9caa18091344ff23">More...</a><br /></td></tr>
<tr class="separator:af567ce645d08f7ce9caa18091344ff23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c8e7ab9523f8f1d877ea9bc150eb3a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nvm_8h.html#a0c8e7ab9523f8f1d877ea9bc150eb3a2">Nvm_TaskStart</a> (void)</td></tr>
<tr class="memdesc:a0c8e7ab9523f8f1d877ea9bc150eb3a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activates the NVM service main OS task.  <a href="nvm_8h.html#a0c8e7ab9523f8f1d877ea9bc150eb3a2">More...</a><br /></td></tr>
<tr class="separator:a0c8e7ab9523f8f1d877ea9bc150eb3a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >NVM service public interface. </p>

<p class="definition">Definition in file <a class="el" href="nvm_8h_source.html">nvm.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a479bf1b27bedcc0536ce73a78debcf38" name="a479bf1b27bedcc0536ce73a78debcf38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a479bf1b27bedcc0536ce73a78debcf38">&#9670;&nbsp;</a></span>NVMSTORE_STANDARD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMSTORE_STANDARD&#160;&#160;&#160;(false)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Non-volatile Memory storage service interface. </p>
<p >Specifies the standard store procedure where only dirty blocks are updated in NVM </p><dl class="section note"><dt>Note</dt><dd>To be used as an argument to the <code><a class="el" href="nvm_8h.html#a646d03a772428cd8d6ec93db8e17f596" title="Updates all NVM blocks to the persistent storage using the current state of the RAM mirror.">Nvm_Store()</a></code> function </dd></dl>

<p class="definition">Definition at line <a class="el" href="nvm_8h_source.html#l00185">185</a> of file <a class="el" href="nvm_8h_source.html">nvm.h</a>.</p>

</div>
</div>
<a id="a96411b91e4f696011d6ba156bf357765" name="a96411b91e4f696011d6ba156bf357765"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96411b91e4f696011d6ba156bf357765">&#9670;&nbsp;</a></span>NVMSTORE_FORCEDEFAULTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMSTORE_FORCEDEFAULTS&#160;&#160;&#160;(true)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Specifies that all blocks are overwritten with default values. </p>
<dl class="section note"><dt>Note</dt><dd>To be used as an argument to the <code><a class="el" href="nvm_8h.html#a646d03a772428cd8d6ec93db8e17f596" title="Updates all NVM blocks to the persistent storage using the current state of the RAM mirror.">Nvm_Store()</a></code> function </dd></dl>

<p class="definition">Definition at line <a class="el" href="nvm_8h_source.html#l00190">190</a> of file <a class="el" href="nvm_8h_source.html">nvm.h</a>.</p>

</div>
</div>
<a id="a7112e851e53e0fac8a012739fff8bf2b" name="a7112e851e53e0fac8a012739fff8bf2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7112e851e53e0fac8a012739fff8bf2b">&#9670;&nbsp;</a></span>NVMSETBLOCK_STORE_POSTPONED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMSETBLOCK_STORE_POSTPONED&#160;&#160;&#160;(false)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates that the block update in NVM can be postponed until the next invocation of the Nvm service regular task function. </p>
<dl class="section note"><dt>Note</dt><dd>Symbol to use with the <code>Nvm_SetBlockById::bStoreImmediately</code> parameter </dd></dl>

<p class="definition">Definition at line <a class="el" href="nvm_8h_source.html#l00195">195</a> of file <a class="el" href="nvm_8h_source.html">nvm.h</a>.</p>

</div>
</div>
<a id="aa70467405e3d41fb7f852235dd77da30" name="aa70467405e3d41fb7f852235dd77da30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa70467405e3d41fb7f852235dd77da30">&#9670;&nbsp;</a></span>NVMSETBLOCK_STORE_IMMEDIATELY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVMSETBLOCK_STORE_IMMEDIATELY&#160;&#160;&#160;(true)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates that the block update in NVM shall take place immediately without waiting for the regular task function to be scheduled. </p>
<dl class="section note"><dt>Note</dt><dd>Symbol to use with the <code>Nvm_SetBlockById::bStoreImmediately</code> parameter </dd></dl>

<p class="definition">Definition at line <a class="el" href="nvm_8h_source.html#l00201">201</a> of file <a class="el" href="nvm_8h_source.html">nvm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abba0b3641f1ceea96945631aa0e621ef" name="abba0b3641f1ceea96945631aa0e621ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abba0b3641f1ceea96945631aa0e621ef">&#9670;&nbsp;</a></span>Nvm_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nvm_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the Nvm service for use. </p>
<p >The function also takes care to initialize the underlying persistent storage (e.g. FRAM, SD card, etc.) drivers.</p>
<dl class="section note"><dt>Note</dt><dd>Actual loading of data from the storage is not performed by this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="nvm_8c_source.html#l00060">60</a> of file <a class="el" href="nvm_8c_source.html">nvm.c</a>.</p>

</div>
</div>
<a id="abb0bcc6b000d26e418dc0b334d1724ac" name="abb0bcc6b000d26e418dc0b334d1724ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb0bcc6b000d26e418dc0b334d1724ac">&#9670;&nbsp;</a></span>Nvm_Load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nvm_Load </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads the NVM data from the persistent storage to the RAM mirror. </p>
<p >The load procedure also performs block CRC checking and replacement with a secondary copy of the data in case of redundant block configuration or with defaults in case the block has only one instance. Another important point here is that the version layout of the Nvm structures is checked and if it doesn't match the hardcoded version of the layout, defaults will be forced for all blocks.</p>
<dl class="section note"><dt>Note</dt><dd>Default data is not replaced in the persistent storage - it is only copied to the NVM cache in RAM. </dd></dl>

<p class="definition">Definition at line <a class="el" href="nvm_8c_source.html#l00108">108</a> of file <a class="el" href="nvm_8c_source.html">nvm.c</a>.</p>

</div>
</div>
<a id="ad9189f9ead27b3c1c558c5c7ffe6b583" name="ad9189f9ead27b3c1c558c5c7ffe6b583"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9189f9ead27b3c1c558c5c7ffe6b583">&#9670;&nbsp;</a></span>Nvm_GetBlockById()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nvm_GetBlockById </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16BlockId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>pBlockBuffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes a copy of the stored data for a given NVM block to a user-specified buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u16BlockId</td><td>ID of the NVM block to read from (as specified in <a class="el" href="nvm__block__ids_8h_source.html">nvm_block_ids.h</a>) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pBlockBuffer</td><td>A pointer to a user-provided buffer to receive a copy of the NVM data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>You have to check the exact data type of the block referenced by <em>u16BlockId</em> because <a class="el" href="nvm_8h.html#ad9189f9ead27b3c1c558c5c7ffe6b583" title="Makes a copy of the stored data for a given NVM block to a user-specified buffer.">Nvm_GetBlockById()</a> may cause memory corruption. In future versions of this interface, we will have named functions per block so that the compiler can enforce type-safety.</dd></dl>
<p><b>Example:</b> <br  />
The following code reads NVM_BLOCK_I2C_CONFIG into the <em><a class="el" href="structi2c__config__t.html">i2c_config_t</a></em> structure because the NVM block defined in <a class="el" href="nvm__app__types_8h_source.html">nvm_app_types.h</a> uses the same type: </p><div class="fragment"><div class="line">NVM_BLOCK_DEFINE_START(<a class="code hl_struct" href="structi2c__config__t.html">i2c_config_t</a>)</div>
<div class="line">    <a class="code hl_struct" href="structbus__pull__up__state__t.html">bus_pull_up_state_t</a> i2c_pull_up_config[I2C_BUS_MAX];</div>
<div class="line">NVM_BLOCK_DEFINE_END(<a class="code hl_struct" href="structi2c__config__t.html">i2c_config_t</a>)</div>
<div class="ttc" id="astructbus__pull__up__state__t_html"><div class="ttname"><a href="structbus__pull__up__state__t.html">bus_pull_up_state_t</a></div><div class="ttdef"><b>Definition:</b> <a href="nvm__app__types_8h_source.html#l00097">nvm_app_types.h:98</a></div></div>
<div class="ttc" id="astructi2c__config__t_html"><div class="ttname"><a href="structi2c__config__t.html">i2c_config_t</a></div><div class="ttdef"><b>Definition:</b> <a href="nvm__app__types_8h_source.html#l00208">nvm_app_types.h:208</a></div></div>
</div><!-- fragment --><p ><span class="emoji">&#x2139;</span> As a rule of thumb, you can <em>blockType</em> provided as a parameter to <code>NVM_BLOCK_DEFINE_START(blockType)</code> as the type for reading and writing NVM block data.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structi2c__config__t.html">i2c_config_t</a> i2c_config;</div>
<div class="line"><a class="code hl_function" href="nvm_8h.html#ad9189f9ead27b3c1c558c5c7ffe6b583">Nvm_GetBlockById</a>(NVM_BLOCK_I2C_CONFIG, &amp;i2c_config);</div>
<div class="ttc" id="anvm_8h_html_ad9189f9ead27b3c1c558c5c7ffe6b583"><div class="ttname"><a href="nvm_8h.html#ad9189f9ead27b3c1c558c5c7ffe6b583">Nvm_GetBlockById</a></div><div class="ttdeci">void Nvm_GetBlockById(uint16_t u16BlockId, void *const pBlockBuffer)</div><div class="ttdoc">Makes a copy of the stored data for a given NVM block to a user-specified buffer.</div><div class="ttdef"><b>Definition:</b> <a href="nvm_8c_source.html#l00243">nvm.c:243</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="nvm_8c_source.html#l00243">243</a> of file <a class="el" href="nvm_8c_source.html">nvm.c</a>.</p>

</div>
</div>
<a id="a7ab2eb6f64098ab587e2664b7c303f63" name="a7ab2eb6f64098ab587e2664b7c303f63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ab2eb6f64098ab587e2664b7c303f63">&#9670;&nbsp;</a></span>Nvm_SetBlockById()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nvm_SetBlockById </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16BlockId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>pBlockBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>bStoreImmediately</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the NVM block data to the persistent storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u16BlockId</td><td>ID of the NVM block to write to (as specified in <a class="el" href="nvm__block__ids_8h_source.html">nvm_block_ids.h</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pBlockBuffer</td><td>A pointer to the user block data (<span class="emoji">&#x2757;</span> the size of this buffer must match the actual size of the block) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bStoreImmediately</td><td>You can put here any of the <code>NVMSETBLOCK_STORE_*</code> macros to specify how the data shall be written to the NVM. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="nvm_8c_source.html#l00255">255</a> of file <a class="el" href="nvm_8c_source.html">nvm.c</a>.</p>

</div>
</div>
<a id="a646d03a772428cd8d6ec93db8e17f596" name="a646d03a772428cd8d6ec93db8e17f596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a646d03a772428cd8d6ec93db8e17f596">&#9670;&nbsp;</a></span>Nvm_Store()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nvm_Store </td>
          <td>(</td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>bForceDefaults</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates all NVM blocks to the persistent storage using the current state of the RAM mirror. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bForceDefaults</td><td>You can use here any of the <code>NVMSTORE_*</code> macros to specify whether to force-write default values or not. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="nvm_8c_source.html#l00189">189</a> of file <a class="el" href="nvm_8c_source.html">nvm.c</a>.</p>

</div>
</div>
<a id="af567ce645d08f7ce9caa18091344ff23" name="af567ce645d08f7ce9caa18091344ff23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af567ce645d08f7ce9caa18091344ff23">&#9670;&nbsp;</a></span>Nvm_RestoreBlockDefaults()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nvm_RestoreBlockDefaults </td>
          <td>(</td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>u16BlockId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The functions overwrites the persistent storage for a given block with the ROM default values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u16BlockId</td><td>ID of the NVM block to restore defaults to (as specified in <a class="el" href="nvm__block__ids_8h_source.html">nvm_block_ids.h</a>) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="nvm_8c_source.html#l00220">220</a> of file <a class="el" href="nvm_8c_source.html">nvm.c</a>.</p>

</div>
</div>
<a id="a0c8e7ab9523f8f1d877ea9bc150eb3a2" name="a0c8e7ab9523f8f1d877ea9bc150eb3a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c8e7ab9523f8f1d877ea9bc150eb3a2">&#9670;&nbsp;</a></span>Nvm_TaskStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Nvm_TaskStart </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Activates the NVM service main OS task. </p>
<p >This is the second stage of the NVM service activation after calling <a class="el" href="nvm_8h.html#abba0b3641f1ceea96945631aa0e621ef" title="Initializes the Nvm service for use.">Nvm_Init()</a> and <a class="el" href="nvm_8h.html#abb0bcc6b000d26e418dc0b334d1724ac" title="Loads the NVM data from the persistent storage to the RAM mirror.">Nvm_Load()</a>. </p>

<p class="definition">Definition at line <a class="el" href="nvm__task_8c_source.html#l00050">50</a> of file <a class="el" href="nvm__task_8c_source.html">nvm_task.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e2c83a6801e015e427e1c55223a130e1.html">espf</a></li><li class="navelem"><a class="el" href="dir_99f3dafb56e7a0be84da390df3a0ec4d.html">core</a></li><li class="navelem"><a class="el" href="dir_5013bdea625176bf2964ef0fdf345617.html">services</a></li><li class="navelem"><a class="el" href="dir_e2cccf14a43ff729055137b36d3d5a54.html">nvm</a></li><li class="navelem"><a class="el" href="dir_86cdae2da4c2ca2d381622a2c9ebfa9f.html">inc</a></li><li class="navelem"><a class="el" href="nvm_8h.html">nvm.h</a></li>
    <li class="footer">Generated by Doxygen 1.9.4 </li>
  </ul>
</div>
</body>
</html>
