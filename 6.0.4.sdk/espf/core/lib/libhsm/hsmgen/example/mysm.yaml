---
ConOps_SM:
  states:
    - Safe:
        transitions:
          - Detumbling: 
              - event: stabilize
          - Idle:
              - event: gs_cmd_received
          - "__self":
              - event: "__periodic"
        attributes:
          on_entry: False
    - Downlink:
        transitions:
          - Idle:
            - { event: "__periodic", guard: is_downlink_timeout_elapsed, action: idle_action }
          - Downlink:
            - event: "__periodic"
    - Idle:
        transitions:
          - Safe:
            - { event: "__periodic", guard: "__auto" }
          - Downlink:
            - event: downlink_sw
          - Payload:
            - event: payload_sw
    - Detumbling:
        transitions:
          - Safe:
            - { event: "__periodic", guard: is_normal_angular_rate }
    - Payload:
        transitions:
          - Idle:
            - { event: "__periodic", guard: is_payload_timeout_elapsed }
          - Safe:
            - { event: "__periodic", guard: "__auto" }

  attributes:
    initial: Safe
